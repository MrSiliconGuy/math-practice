{"version":3,"sources":["components/cross.svg","components/AppContainer.tsx","model/Util.ts","model/Math.ts","model/Stats.ts","components/HomeView.tsx","components/SelectView.tsx","model/Storage.ts","components/MathView.tsx","components/SettingsView.tsx","components/StatsView.tsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["module","exports","AppContainer","exit","this","props","exitPrompt","window","confirm","onExit","title","children","showExit","className","onClick","handleExit","bind","src","cross","alt","React","Component","Util","random","Math","randInt","min","max","undefined","floor","randChoice","arr","length","range","_","clone","obj","cloneDeep","shuffle","slice","i","j","extend","prop","plural","amount","text","formatSeconds","mills","round","formatDate","time","curTime","Date","getTime","days","months","date","diff","minutesAgo","hoursAgo","daysAgo","getDay","getMonth","getDate","MathOperators","SessionTypes","MathOperatorSymbols","SessionTypeNames","DefaultRange","MathFuncs","generateQuestion","num1","num2","oper","ans","Error","generateQuestionsRandom","type","pool1","pool2","numQuestions","questions","question","push","generateQuestionsOrdered","generateSession","options","isDefault","useRange","order","timeStarted","times","progress","total","generateDefaultSessionOptions","generateSessionResults","session","totalTime","reduce","a","t","individual","generateSessionIndividualResults","includes","index1","index2","startSession","StatFuncs","filterType","history","filter","v","getLatestDefault","getHistorySorted","sort","h1","h2","getFastest","result","fastest","b","splice","getSlowest","slowest","getIndividualAverage","filtered","count","sum","res","HomeView","state","sessionType","onStartPractice","view","onNavigateSelectSession","onNavigateStats","onNavigateSettings","e","target","value","setState","handleStartClick","onChange","handleSelectType","map","key","handleNavigate","RangeControlTypes","RangeControlTypeNames","SelectView","rangeType","numberQuestions","onStartSession","index","template","sessionTemplates","name","prompt","onAddSessionTemplate","onRemoveSessionTemplate","parseInt","Number","isNaN","NaN","isPool1","num","pool","indexOf","rangeControls","orderControls","templates","pattern","handleInputRangeAmount","onBlur","handleValidateRangeAmount","RangePool","onToggleNum","n","handleToggleRangePool","checked","handleSelectNumberQuestions","handleToggleShuffle","SessionTemplate","onStart","handleStartSessionTemplate","onRemove","handleRemoveTemplate","handleSelectRangeType","handleToggleRandom","handleStartSession","handleSaveTemplate","DefaultData","version","settings","showProgressBar","StorageFuncs","verifyData","Array","isArray","serialize","data","JSON","stringify","lzString","compressToUTF16","deserialize","uncompress","decompressFromUTF16","parse","load","localStorage","getItem","save","setItem","MathView","input","setTimeout","startTime","elapsedTime","results","onFinishSession","curQuestion","autoFocus","placeholder","maxLength","size","handleInput","style","width","SettingsView","showImport","showExport","importText","onUpdateSettings","isImport","onImportSettings","keyCode","handleImportSettings","alert","dataSerialized","handleToggleShowProgressBar","handleImportExportToggle","handleClearData","readOnly","cols","rows","select","handleExportBlur","handleImportEdit","onKeyPress","handleImportSettingsKeypress","handleAboutClick","rel","href","StatsView","onRemoveHistory","handleChangeView","RecentStats","TotalStats","handleRemoveHistory","IndividualStats","latest","child","sorted","defaultHistory","s","nonDefaultHistory","handleRemove","findIndex","h","timesSorted","concat","getColor","ratio","hue","tableData","backgroundColor","toFixed","App","sessionOptions","updateData","handleStartDefaultSession","handleTemplateAdd","handleTemplateRemove","handleFinishSession","handleUpdateSettings","handleImportData","isLocalhost","Boolean","location","hostname","match","registerValidSW","swUrl","config","navigator","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","controller","console","log","onUpdate","onSuccess","catch","error","ReactDOM","render","document","getElementById","URL","process","origin","addEventListener","fetch","headers","response","contentType","get","status","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.c9e2e555.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/cross.b5d66db1.svg\";","import React from 'react';\nimport './AppContainer.css';\nimport cross from './cross.svg';\n\ntype AppContainerProps = {\n    title: string,\n    children: React.ReactNode,\n    showExit: boolean,\n    exitPrompt: string | null,\n    onExit: () => void\n}\n\nexport class AppContainer extends React.Component<AppContainerProps> {\n    handleExit() {\n        let exit = true;\n        if (this.props.exitPrompt !== null) {\n            exit = window.confirm(this.props.exitPrompt);\n        }\n        if (exit) {\n            this.props.onExit();\n        }\n    }\n\n    render() {\n        let title = this.props.title;\n        let children = this.props.children;\n        let showExit = this.props.showExit;\n        return <div className=\"AppContainer\">\n            <div className=\"AppContainer-topbar\">\n                <span>{title}</span>\n                {showExit ? (<button onClick={this.handleExit.bind(this)}>\n                    {<img src={cross} alt=\"X\"/>}\n                </button>) : null}\n            </div>\n            <div className=\"AppContainer-container\">\n                {children}\n            </div>\n        </div>;\n    }\n}","import _ from 'lodash';\n\nexport const Util = {\n    random(): number {\n        return Math.random();\n    },\n    randInt(min: number, max?: number): number {\n        if (max === undefined) {\n            max = min;\n            min = 0;\n        }\n        return Math.floor(Util.random() * (max - min)) + min;\n    },\n    randChoice<T>(arr: T[]): T {\n        return arr[Util.randInt(0, arr.length)];\n    },\n    range(min: number, max: number) {\n        return _.range(min, max + 1);\n    },\n    clone<T>(obj: T): T {\n        return _.cloneDeep(obj);\n    },\n    shuffle<T>(arr: T[]): T[] {\n        arr = arr.slice();\n        for (let i = 0; i < arr.length; i++) {\n            let j = Util.randInt(0, arr.length);\n            [arr[i], arr[j]] = [arr[j], arr[i]];\n        }\n        return arr;\n    },\n    extend<TSource, TObj>(obj: TSource, prop: TObj): TSource & TObj {\n        return _.extend(obj, prop)\n    },\n    plural(amount: number, text: string) {\n        return amount + \" \" + text + (amount === 1 ? \"\" : \"s\");\n    },\n    formatSeconds(mills: number): string {\n        return Math.round(mills / 100) / 10 + \"s\";\n    },\n    formatDate(time: number, curTime: number = new Date().getTime()): string {\n        const days = [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"];\n        const months = [\"January\", \"Februrary\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\",\n            \"October\", \"November\", \"December\"\n        ];\n\n        let date = new Date(time);\n        let diff = (curTime - time) / (1000 * 60); // Time difference in minutes\n        let minutesAgo = Math.round(diff);\n        let hoursAgo = Math.round(diff / 60);\n        let daysAgo = Math.round(diff / 60 / 24);\n\n        if (diff < 1 && diff > 0) {\n            return `Just now`;\n        } else if (diff < 60) {\n            return Util.plural(minutesAgo, \"minute\") + \" ago\";\n        } else if (diff < (60 * 24)) {\n            return Util.plural(hoursAgo, \"minute\") + \" ago\";\n        } else if (diff < (60 * 24 * 3)) {\n            return Util.plural(daysAgo, \"minute\") + \" ago\";\n        } else if (diff < (60 * 24 * 7)) {\n            return \"Last \" + days[date.getDay()] + \" (\" + Util.plural(daysAgo, \"day\") + \" ago)\";\n        } else {\n            return months[date.getMonth()] + \" \" + date.getDate() + \"(\" + Util.plural(daysAgo, \"days\") + \" ago)\";\n        }\n    }\n}","import { Util } from \"./Util\";\n\nexport type MathOperator = 'add' | 'sub' | 'mul' | 'div';\n\nexport const MathOperators: MathOperator[] = ['add', 'sub', 'mul', 'div'];\n\nexport type SessionType = MathOperator | 'mix' | 'sqr';\n\nexport const SessionTypes: SessionType[] = ['add', 'sub', 'mul', 'div', 'mix', 'sqr'];\n\nexport const MathOperatorSymbols = {\n    'add': '+',\n    'sub': '−',\n    'mul': '×',\n    'div': '÷'\n}\n\nexport const SessionTypeNames = {\n    'add': 'Addition',\n    'sub': 'Subtraction',\n    'mul': 'Multiplication',\n    'div': 'Division',\n    'mix': 'Mixed',\n    'sqr': 'Squares'\n}\n\nexport type MathQuestion = {\n    num1: number,\n    num2: number,\n    oper: MathOperator,\n    ans: number\n}\n\nexport type MathSession = {\n    timeStarted: number,\n    type: SessionType,\n    questions: MathQuestion[],\n    times: number[],\n    progress: number,\n    total: number,\n    isDefault: boolean,\n}\n\nexport type MathSessionOrder = 'all' | 'all-shuffle' | 'random';\n\nexport type MathSessionOptions = {\n    type: SessionType,\n    // Whether to use range or pool\n    useRange: boolean,\n    pool1?: number[],\n    pool2?: number[],\n    range?: { min: number, max: number },\n\n    // Run all questions, all but shuffled, or a random amount (uses numQuestions)\n    order: MathSessionOrder,\n    numQuestions?: number,\n\n    // Whether or not this is a default session\n    isDefault: boolean\n}\n\nexport type MathSessionTemplate = {\n    options: MathSessionOptions,\n    name: string\n}\n\nexport type MathSessionResults = {\n    date: number,\n    type: SessionType,\n    totalTime: number,\n    numQuestions: number,\n    individual?: MathSessionIndividualResults\n}\n\nexport type MathSessionIndividualResults = {\n    oper: MathOperator,\n    range: { min: number, max: number }\n    times: number[][]\n}\n\nexport const DefaultRange = {\n    min: 1,\n    max: 12\n}\n\nexport const MathFuncs = {\n    generateQuestion(num1: number, num2: number, oper: MathOperator): MathQuestion {\n        if (oper === 'add') {\n            return {\n                num1, num2, oper, ans: num1 + num2\n            }\n        } else if (oper === 'sub') {\n            return {\n                num1: num1 + num2, num2, oper, ans: num1\n            }\n        } else if (oper === 'mul') {\n            return {\n                num1, num2, oper, ans: num1 * num2\n            }\n        } else if (oper === 'div') {\n            return {\n                num1: num1 * num2, num2, oper, ans: num1\n            }\n        }\n        throw Error();\n    },\n    generateQuestionsRandom(type: SessionType, pool1: number[], pool2: number[], numQuestions: number): MathQuestion[] {\n        let num1: number;\n        let num2: number;\n        let oper: MathOperator;\n        let questions: MathQuestion[] = [];\n        for (let i = 0; i < numQuestions; i++) {\n            if (type === \"mix\") {\n                oper = Util.randChoice(MathOperators);\n                num1 = Util.randChoice(pool1);\n                num2 = Util.randChoice(pool2);\n            } else if (type === \"sqr\") {\n                oper = 'mul';\n                num1 = Util.randChoice(pool1);\n                num2 = num1;\n            } else {\n                oper = type;\n                num1 = Util.randChoice(pool1);\n                num2 = Util.randChoice(pool2);\n            }\n            let question = MathFuncs.generateQuestion(num1, num2, oper);\n            questions.push(question);\n        }\n        return questions;\n    },\n    generateQuestionsOrdered(type: SessionType, pool1: number[], pool2: number[]): MathQuestion[] {\n        let num1: number;\n        let num2: number;\n        let oper: MathOperator;\n        let questions: MathQuestion[] = [];\n        for (let i = 0; i < pool1.length; i++) {\n            for (let j = 0; j < pool2.length; j++) {\n                if (type === \"mix\") {\n                    oper = Util.randChoice(MathOperators);\n                    num1 = pool1[i];\n                    num2 = pool2[j];\n                } else if (type === \"sqr\") {\n                    oper = \"mul\";\n                    num1 = pool1[i];\n                    num2 = pool2[j];\n                    if (num1 !== num2) {\n                        continue;\n                    }\n                } else {\n                    oper = type;\n                    num1 = pool1[i];\n                    num2 = pool2[j];\n                }\n                let question = MathFuncs.generateQuestion(num1, num2, oper);\n                questions.push(question);\n            }\n        }\n        return questions;\n    },\n    generateSession(options: MathSessionOptions): MathSession {\n        let type = options.type;\n        let questions: MathQuestion[] = [];\n        let timeStarted = 0;\n        let times: number[] = [];\n        let progress = 0;\n        let total: number;\n        let isDefault = options.isDefault;\n\n        let pool1: number[];\n        let pool2: number[]\n        if (options.useRange) {\n            pool1 = Util.range(options.range!.min, options.range!.max)\n            pool2 = Util.range(options.range!.min, options.range!.max);\n        } else {\n            pool1 = Util.clone(options.pool1!);\n            pool2 = Util.clone(options.pool2 ?? options.pool1!);\n        }\n\n        // Generate Questions\n        if (options.order === \"random\") {\n            questions = MathFuncs.generateQuestionsRandom(type, pool1, pool2, options.numQuestions!);\n        } else if (options.order === \"all\") {\n            questions = MathFuncs.generateQuestionsOrdered(type, pool1, pool2);\n        } else if (options.order === \"all-shuffle\") {\n            questions = MathFuncs.generateQuestionsOrdered(type, pool1, pool2);\n            questions = Util.shuffle(questions);\n        }\n        total = questions.length;\n\n        return {\n            timeStarted,\n            type,\n            questions,\n            times,\n            progress,\n            total,\n            isDefault\n        }\n    },\n    generateDefaultSessionOptions(type: SessionType): MathSessionOptions {\n        let useRange = true;\n        let range = Util.clone(DefaultRange);\n        let order: \"all-shuffle\" = \"all-shuffle\";\n        return {\n            type,\n            useRange,\n            range,\n            order,\n            isDefault: true\n        };\n    },\n    generateSessionResults(session: MathSession): MathSessionResults {\n        let date = session.timeStarted;\n        let type = session.type;\n        let totalTime = session.times.reduce((a, t) => a + t, 0)\n        let individual = MathFuncs.generateSessionIndividualResults(session);\n        let numQuestions = session.total;\n        return {\n            date,\n            type,\n            totalTime,\n            numQuestions,\n            individual\n        };\n    },\n    generateSessionIndividualResults(session: MathSession): MathSessionIndividualResults | undefined {\n        // Only default math sessions where the session type is a math operator\n        // are allowed\n        if (!session.isDefault || !MathOperators.includes(session.type as MathOperator)) {\n            return;\n        }\n        let oper = session.type as MathOperator;\n        let range = Util.clone(DefaultRange);\n        let times: number[][] = [];\n        for (let i = range.min; i <= range.max; i++) {\n            let arr: number[] = []\n            for (let j = range.min; j <= range.max; j++) {\n                arr.push(0);\n            }\n            times.push(arr);\n        }\n        for (let i = 0; i < session.questions.length; i++) {\n            let question = session.questions[i];\n            let time = session.times[i];\n            let num1: number, num2: number;\n            if (['sub', 'div'].includes(question.oper)) {\n                num1 = question.ans;\n                num2 = question.num2;\n            } else {\n                num1 = question.num1;\n                num2 = question.num2;\n            }\n            let index1 = num1 - range.min;\n            let index2 = num2 - range.min;\n            times[index1][index2] = time;\n        }\n\n        return {\n            oper,\n            range,\n            times\n        };\n    },\n    startSession(session: MathSession): MathSession {\n        session.timeStarted = new Date().getTime();\n        return session;\n    }\n}","import { SessionType, MathSessionResults, MathQuestion, MathOperator, MathFuncs, DefaultRange } from \"./Math\";\n\ntype QuestionTime = {\n    question: MathQuestion\n    time: number\n}\n\nexport const StatFuncs = {\n    filterType(history: MathSessionResults[], type: SessionType): MathSessionResults[] {\n        return history.filter(v => v.type === type);\n    },\n    getLatestDefault(history: MathSessionResults[], type: SessionType): MathSessionResults | null {\n        for (let i = history.length - 1; i >= 0; i--) {\n            if (history[i].type === type) {\n                return history[i];\n            }\n        }\n        return null;\n    },\n    getHistorySorted(history: MathSessionResults[]): MathSessionResults[] {\n        return history.slice().sort((h1, h2) => h1.date - h2.date);\n    },\n    getFastest(result: MathSessionResults, amount: number): QuestionTime[] {\n        let individual = result.individual!;\n        let fastest: QuestionTime[] = [];\n        // Loop over each time\n        for (let i = 0; i < individual.times.length; i++) {\n            for (let j = 0; j < individual.times.length; j++) {\n                let time = individual.times[i][j];\n                // Add if it is faster than the slowest in the list\n                if (fastest.length < amount || fastest[fastest.length - 1].time > time) {\n                    fastest.push({\n                        question:\n                            MathFuncs.generateQuestion(i + individual.range.min,\n                                j + individual.range.min, result.type as MathOperator),\n                        time: time\n                    });\n                    fastest.sort((a, b) => a.time - b.time);\n                    fastest.splice(amount);\n                }\n            }\n        }\n        return fastest;\n    },\n    getSlowest(result: MathSessionResults, amount: number): QuestionTime[] {\n        let individual = result.individual!;\n        let slowest: QuestionTime[] = [];\n        for (let i = 0; i < individual.times.length; i++) {\n            for (let j = 0; j < individual.times.length; j++) {\n                let time = individual.times[i][j];\n                if (slowest.length < amount || slowest[slowest.length - 1].time < time) {\n                    slowest.push({\n                        question:\n                            MathFuncs.generateQuestion(i + individual.range.min,\n                                j + individual.range.min, result.type as MathOperator),\n                        time: time\n                    });\n                    slowest.sort((a, b) => b.time - a.time);\n                    slowest.splice(amount);\n                }\n            }\n        }\n        return slowest;\n    },\n    getIndividualAverage(history: MathSessionResults[], type: SessionType,\n        num1: number, num2: number, amount: number): number | null {\n\n        let filtered = StatFuncs.filterType(history, type);\n        let count = 0;\n        let sum = 0;\n        for (const res of filtered) {\n            if (res.individual !== undefined) {\n                count += 1;\n                sum += res.individual.times[num1 - DefaultRange.min][num2 - DefaultRange.min];\n            }\n        }\n\n        if (count === 0) {\n            return null;\n        } else {\n            return sum / count;\n        }\n    }\n}","import React from 'react';\nimport { SessionType, SessionTypes, SessionTypeNames, MathSessionResults } from '../model/Math';\nimport './HomeView.css';\nimport { StatFuncs } from '../model/Stats';\n\ntype HomeViewProps = {\n    history: MathSessionResults[],\n    onStartPractice: (type: SessionType) => void,\n    onNavigateSelectSession: () => void,\n    onNavigateStats: () => void,\n    onNavigateSettings: () => void\n}\n\ntype HomeViewState = {\n    sessionType: SessionType,\n}\n\nexport class HomeView extends React.Component<HomeViewProps, HomeViewState> {\n    constructor(props: HomeViewProps) {\n        super(props);\n        let history = StatFuncs.getHistorySorted(props.history);\n        let type: SessionType;\n        if (history.length === 0) {\n            type = \"add\"\n        } else {\n            type = history[history.length - 1].type;\n        }\n        this.state = {\n            sessionType: type\n        }\n    }\n\n    handleStartClick() {\n        this.props.onStartPractice(this.state.sessionType);\n    }\n\n    handleNavigate(view: 'select' | 'stats' | 'settings') {\n        if (view === 'select') {\n            this.props.onNavigateSelectSession();\n        } else if (view === 'stats') {\n            this.props.onNavigateStats();\n        } else {\n            this.props.onNavigateSettings();\n        }\n    }\n\n    handleSelectType(e: React.ChangeEvent) {\n        let sessionType = (e.target as HTMLSelectElement).value as SessionType;\n        this.setState({\n            sessionType\n        })\n    }\n\n    render() {\n        let sessionType = this.state.sessionType;\n        return (\n            <div className=\"Home\">\n                <button className=\"Home-start\" onClick={this.handleStartClick.bind(this)}>Start<br />Practice</button>\n                <select className=\"Home-start-type\" value={sessionType} onChange={this.handleSelectType.bind(this)}>\n                    {\n                        SessionTypes.map(t => <option value={t} key={t}>\n                            {SessionTypeNames[t]}\n                        </option>)\n                    }\n                </select>\n                <span className=\"link\" onClick={() => this.handleNavigate('select')}>\n                    Custom Session\n                </span>\n                <span className=\"link\" onClick={() => this.handleNavigate('stats')}>\n                    User Stats\n                </span>\n                <span className=\"link\" onClick={() => this.handleNavigate('settings')}>\n                    Settings\n                </span>\n            </div>\n        );\n    }\n}","import React from 'react';\nimport { MathSessionTemplate, MathSessionOptions, SessionType, SessionTypes, SessionTypeNames } from '../model/Math';\nimport { Util } from '../model/Util';\nimport './SelectView.css';\nimport cross from './cross.svg';\n\ntype RangeControlType = \"range\" | \"pool\";\n\nconst RangeControlTypes: RangeControlType[] = [\"range\", \"pool\"];\n\nconst RangeControlTypeNames = {\n    \"range\": \"Range\",\n    \"pool\": \"Pool\"\n}\n\ntype SelectViewProps = {\n    sessionTemplates: MathSessionTemplate[],\n    onStartSession: (options: MathSessionOptions) => void,\n    onAddSessionTemplate: (template: MathSessionTemplate) => void,\n    onRemoveSessionTemplate: (index: number) => void,\n}\n\ntype SelectViewState = {\n    rangeType: RangeControlType,\n    range: { min: number, max: number },\n    pool1: number[],\n    pool2: number[],\n    type: SessionType,\n    shuffle: boolean,\n    random: boolean,\n    numberQuestions: number\n}\n\nexport class SelectView extends React.Component<SelectViewProps, SelectViewState> {\n    constructor(props: SelectViewProps) {\n        super(props);\n        this.state = {\n            rangeType: \"range\",\n            range: { min: 1, max: 12 },\n            pool1: Util.range(1, 12),\n            pool2: Util.range(1, 12),\n            type: \"add\",\n            shuffle: true,\n            random: false,\n            numberQuestions: 20\n        }\n    }\n\n    handleStartSession() {\n        this.props.onStartSession({\n            type: this.state.type,\n            useRange: this.state.rangeType === \"range\",\n            range: this.state.range,\n            pool1: this.state.pool1,\n            pool2: this.state.pool2,\n            order: this.state.random ? \"random\" :\n                this.state.shuffle ? \"all-shuffle\" : \"all\",\n            numQuestions: this.state.numberQuestions,\n            isDefault: false\n        });\n    }\n\n    handleStartSessionTemplate(index: number) {\n        let template = this.props.sessionTemplates[index];\n        this.props.onStartSession(template.options);\n    }\n\n    handleSaveTemplate() {\n        let options: MathSessionOptions = {\n            type: this.state.type,\n            useRange: this.state.rangeType === \"range\",\n            range: this.state.range,\n            pool1: this.state.pool1,\n            pool2: this.state.pool2,\n            order: this.state.random ? \"random\" :\n                this.state.shuffle ? \"all-shuffle\" : \"all\",\n            numQuestions: this.state.numberQuestions,\n            isDefault: false\n        }\n        let name = window.prompt(\"Please enter a name for your session:\");\n        if (name === null) {\n            return;\n        }\n        this.props.onAddSessionTemplate({\n            options,\n            name\n        })\n    }\n\n    handleRemoveTemplate(index: number) {\n        this.props.onRemoveSessionTemplate(index);\n    }\n\n    handleSelectRangeType(e: React.ChangeEvent) {\n        let rangeType = (e.target as HTMLSelectElement).value as RangeControlType;\n        this.setState({ rangeType });\n    }\n\n    handleInputRangeAmount(e: React.ChangeEvent, min: boolean) {\n        let value = parseInt((e.target as HTMLInputElement).value, 10);\n        if (value < 0) {\n            value = 1;\n        }\n        let range = Util.clone(this.state.range);\n        if (min) {\n            range.min = value;\n        } else {\n            range.max = value;\n        }\n        this.setState({\n            range\n        });\n    }\n\n    handleValidateRangeAmount(e: React.ChangeEvent, min: boolean) {\n        let value = parseInt((e.target as HTMLInputElement).value, 10);\n        if (Number.isNaN(value)) {\n            value = NaN\n        }\n        value = Math.min(Math.max(value, 1), 1000);\n        let range = Util.clone(this.state.range);\n        if (min) {\n            range.min = value;\n            if (range.max < range.min) {\n                range.max = range.min;\n            }\n        } else {\n            range.max = value;\n            if (range.min > range.max) {\n                range.min = range.max\n            }\n        }\n        this.setState({\n            range\n        });\n    }\n\n    handleToggleRangePool(isPool1: boolean, num: number) {\n        let pool = isPool1 ? this.state.pool1 : this.state.pool2;\n        let index = pool.indexOf(num);\n        if (index === -1) {\n            pool.push(num);\n        } else {\n            pool.splice(index, 1);\n        }\n\n        if (isPool1) {\n            this.setState({\n                pool1: pool\n            });\n        } else {\n            this.setState({\n                pool2: pool\n            });\n        }\n    }\n\n    handleSelectType(e: React.ChangeEvent) {\n        let type = (e.target as HTMLSelectElement).value as SessionType;\n        this.setState({ type });\n    }\n\n    handleToggleShuffle() {\n        this.setState({\n            shuffle: !this.state.shuffle\n        });\n    }\n\n    handleToggleRandom() {\n        this.setState({\n            random: !this.state.random\n        });\n    }\n\n    handleSelectNumberQuestions(numberQuestions: number) {\n        this.setState({\n            numberQuestions\n        });\n    }\n\n    render() {\n        let templates = this.props.sessionTemplates;\n        let rangeType = this.state.rangeType;\n        let range = this.state.range;\n        let pool1 = this.state.pool1;\n        let pool2 = this.state.pool2;\n        let type = this.state.type;\n        let random = this.state.random;\n        let shuffle = this.state.shuffle;\n        let numberQuestions = this.state.numberQuestions;\n\n        let rangeControls: React.ReactNode;\n        if (rangeType === \"range\") {\n            rangeControls = <div className=\"Select-range-range\">\n                <input type=\"number\" pattern=\"[0-9]*\"\n                    min={1}\n                    value={Number.isNaN(range.min) ? \"\" : range.min}\n                    onChange={e => this.handleInputRangeAmount(e, true)}\n                    onBlur={e => this.handleValidateRangeAmount(e, true)} />\n                <input type=\"number\" pattern=\"[0-9]*\"\n                    min={1}\n                    value={Number.isNaN(range.max) ? \"\" : range.max}\n                    onChange={e => this.handleInputRangeAmount(e, false)}\n                    onBlur={e => this.handleValidateRangeAmount(e, false)} />\n            </div>\n        } else if (rangeType === \"pool\") {\n            rangeControls = [\n                <RangePool\n                    key={1}\n                    pool={pool1}\n                    onToggleNum={n => this.handleToggleRangePool(true, n)} />,\n                <RangePool\n                    key={2}\n                    pool={pool2}\n                    onToggleNum={n => this.handleToggleRangePool(false, n)} />,\n            ]\n        }\n\n        let orderControls: React.ReactNode;\n        if (random) {\n            orderControls = <div className=\"Select-order-random\">\n                {\n                    [20, 50, 100].map(n => [\n                        <input type=\"radio\" value={n}\n                            checked={n === numberQuestions}\n                            onChange={() => this.handleSelectNumberQuestions(n)} />,\n                        <label\n                            onClick={() => this.handleSelectNumberQuestions(n)}>{n} Questions</label>,\n                        <br />\n                    ])\n                }\n            </div>\n        } else {\n            orderControls = <div className=\"Select-order-shuffle\">\n                <input type=\"checkbox\" checked={shuffle}\n                    onChange={this.handleToggleShuffle.bind(this)} />\n                <label\n                    onClick={this.handleToggleShuffle.bind(this)}>Shuffle?</label>\n            </div>\n        }\n\n        return (\n            <div className=\"Select\">\n                <div className=\"Select-templates\">\n                    {\n                        templates.map((t, i) =>\n                            <SessionTemplate\n                                name={t.name}\n                                key={t.name}\n                                onStart={() => this.handleStartSessionTemplate(i)}\n                                onRemove={() => this.handleRemoveTemplate(i)}\n                            />\n                        )\n                    }\n                </div>\n                <div className=\"Select-options\">\n                    <div className=\"Select-rangetype\">\n                        <select value={rangeType} onChange={this.handleSelectRangeType.bind(this)}>\n                            {\n                                RangeControlTypes.map(t =>\n                                    <option key={t} value={t}>{RangeControlTypeNames[t]}</option>)\n                            }\n                        </select>\n                    </div>\n                    {rangeControls}\n                    <div className=\"Select-type\">\n                        <span>Type: </span>\n                        <select value={type} onChange={this.handleSelectType.bind(this)}>\n                            {\n                                SessionTypes.map(t =>\n                                    <option key={t} value={t}>{SessionTypeNames[t]}</option>)\n                            }\n                        </select>\n                    </div>\n                    <div className=\"Select-order\">\n                        <input type=\"checkbox\" checked={random}\n                            onChange={this.handleToggleRandom.bind(this)} />\n                        <label onClick={this.handleToggleRandom.bind(this)}>\n                            Random?\n                        </label>\n                    </div>\n                    {orderControls}\n                    <div className=\"Select-submit\">\n                        <button onClick={this.handleStartSession.bind(this)}>Start Practice</button>\n                        <span className=\"link\" onClick={this.handleSaveTemplate.bind(this)}>Save Settings</span>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\ntype SessionTemplateProps = {\n    name: string,\n    onStart: () => void,\n    onRemove: () => void\n}\n\nexport function SessionTemplate(props: SessionTemplateProps) {\n    function remove() {\n        if (!window.confirm(\"Are you sure you want to remove this template?\")) {\n            return;\n        }\n        props.onRemove();\n    }\n\n    return (<div className=\"SessionTemplate\">\n        <button className=\"SessionTemplate-start\" onClick={props.onStart}>Start</button>\n        <span className=\"SessionTemplate-name\">{props.name}</span>\n        <button className=\"SessionTemplate-remove\" onClick={remove}>\n            <img src={cross} alt=\"X\" />\n        </button>\n    </div>);\n}\n\ntype RangePoolProps = {\n    onToggleNum: (num: number) => void\n    pool: number[]\n}\n\nexport function RangePool(props: RangePoolProps) {\n    let { pool, onToggleNum } = props;\n    return (<div className=\"RangePool\">{\n        Util.range(1, 20).map(i =>\n            <button key={i}\n                className={\"RangePool-button \" +\n                    (pool.includes(i) ? \"RangePool-selected\" : \"\")}\n                onClick={() => onToggleNum(i)}>\n                {i}\n            </button>)\n    }</div>);\n}","import { MathSessionTemplate, MathSessionResults } from \"./Math\";\nimport lzString from \"lz-string\";\nimport { Util } from \"./Util\";\n\nconst version = \"v1.0.0\";\n\nexport type Settings = {\n    showProgressBar: boolean\n}\n\nconst defaultSettings: Settings = {\n    showProgressBar: false\n}\n\nexport type Data = {\n    version: string,\n    history: MathSessionResults[],\n    templates: MathSessionTemplate[],\n    settings: Settings\n}\n\nexport const DefaultData: Data = {\n    version,\n    history: [],\n    templates: [],\n    settings: defaultSettings\n}\n\nexport const StorageFuncs = {\n    verifyData(obj: any): obj is Data {\n        return (typeof obj === \"object\") &&\n            (obj.version !== undefined) &&\n            (obj.version === version) &&\n            (obj.history !== undefined) &&\n            (Array.isArray(obj.history)) &&\n            (obj.templates !== undefined) &&\n            (Array.isArray(obj.templates)) &&\n            (obj.settings !== undefined) &&\n            (typeof obj.settings === \"object\");\n    },\n    serialize(data: Data): string {\n        let text = JSON.stringify(data);\n        let compress = lzString.compressToUTF16(text);\n        return compress;\n    },\n    deserialize(text: string): Data {\n        let uncompress = lzString.decompressFromUTF16(text);\n        let data = JSON.parse(uncompress);\n        if (this.verifyData(data)) {\n            return data;\n        } else {\n            throw Error(\"Could not parse data\");\n        }\n    },\n    load(): Data {\n        let text = window.localStorage.getItem(version);\n        if (text === null) {\n            return Util.clone(DefaultData);\n        } else {\n            return StorageFuncs.deserialize(text);\n        }\n    },\n    async save(data: Data) {\n        let text = StorageFuncs.serialize(data);\n        window.localStorage.setItem(version, text);\n    }\n}","import React from 'react';\nimport { MathSession, MathFuncs, MathSessionOptions, MathOperatorSymbols, MathSessionResults } from '../model/Math';\nimport { Settings } from '../model/Storage';\nimport './MathView.css';\n\ntype MathViewProps = {\n    options: MathSessionOptions,\n    settings: Settings,\n    onFinishSession: (results: MathSessionResults) => void\n}\n\ntype MathViewState = {\n    input: number | null,\n    session: MathSession\n}\n\n\nexport class MathView extends React.Component<MathViewProps, MathViewState> {\n    constructor(props: MathViewProps) {\n        super(props);\n        let session = MathFuncs.generateSession(props.options);\n        MathFuncs.startSession(session);\n        this.state = {\n            session,\n            input: null\n        }\n    }\n\n    handleInput(e: React.FormEvent) {\n        // Skip if already finished somehow\n        if (this.state.session.progress === this.state.session.total) {\n            return;\n        }\n\n        let value = (e.target as HTMLInputElement).value as string;\n        let num = parseInt(value, 10);\n\n        let input = this.state.input;\n        input = Number.isNaN(num) ? null : num;\n\n        this.setState({ input }, () => setTimeout(() => {\n            let session = this.state.session;\n            // Skip if already finished somehow\n            if (this.state.session.progress === this.state.session.total) {\n                return;\n            }\n\n            if (input === session.questions[session.progress].ans) {\n                let input = null;\n                let startTime = session.timeStarted;\n                let totalTime = session.times.reduce((v, t) => v + t, 0);\n                let currentTime = new Date().getTime()\n                let elapsedTime = currentTime - startTime - totalTime;\n                // Cap at 9.9s per question\n                elapsedTime = Math.min(elapsedTime, 9900);\n                session.times.push(elapsedTime);\n                session.progress += 1;\n                if (session.progress === session.total) {\n                    let results = MathFuncs.generateSessionResults(session);\n                    this.props.onFinishSession(results)\n                } else {\n                    this.setState({\n                        session,\n                        input\n                    });\n                }\n            }\n        }, 100));\n    }\n\n    render() {\n        let settings = this.props.settings;\n        let input = this.state.input;\n        let session = this.state.session;\n        let curQuestion = session.questions[session.progress];\n\n        return (\n            <div className=\"Math\">\n                <div className=\"Math-session\">\n                    <div className=\"Math-question\">\n                        <span className=\"Math-oper\">{MathOperatorSymbols[curQuestion.oper]}</span>\n                        <div className=\"Math-numbers\">\n                            <span>{curQuestion.num1}</span>\n                            <span>{curQuestion.num2}</span>\n                        </div>\n                    </div>\n                    <div className=\"Math-answer\">\n                        <input\n                            autoFocus={true}\n                            placeholder=\"?\"\n                            maxLength={3}\n                            size={3}\n                            value={input ?? \"\"}\n                            onChange={this.handleInput.bind(this)}\n                            type=\"number\" />\n                    </div>\n                </div>\n                {\n                    settings.showProgressBar ?\n                        <div className=\"Math-progress\">\n                            <div style={{ width: (session.progress / session.total * 100) + \"%\" }}></div>\n                        </div> : null\n                }\n            </div>\n        );\n    }\n}","import React from 'react';\nimport { Settings, Data, StorageFuncs, DefaultData } from '../model/Storage';\nimport './SettingsView.css'\n\ntype SettingsViewProps = {\n    data: Data,\n    settings: Settings,\n    onUpdateSettings: (settings: Settings) => void,\n    onImportSettings: (text: string) => boolean,\n}\n\ntype SettingsViewState = {\n    showImport: boolean,\n    showExport: boolean,\n    importText: string\n}\n\nexport class SettingsView extends React.Component<SettingsViewProps, SettingsViewState> {\n    constructor(props: SettingsViewProps) {\n        super(props);\n        this.state = {\n            showImport: false,\n            showExport: false,\n            importText: \"\"\n        }\n    }\n\n    handleToggleShowProgressBar() {\n        let settings = this.props.settings;\n        settings.showProgressBar = !settings.showProgressBar;\n        this.props.onUpdateSettings(settings);\n    }\n\n    handleImportExportToggle(isImport: boolean) {\n        let showImport = this.state.showImport;\n        let showExport = this.state.showExport;\n        if (isImport) {\n            showImport = !showImport;\n            showExport = false;\n        } else {\n            showImport = false;\n            showExport = !showExport;\n        }\n        this.setState({\n            showImport,\n            showExport\n        })\n    }\n\n    handleExportBlur() {\n        this.setState({\n            showImport: false,\n            showExport: false\n        })\n    }\n\n    handleImportEdit(e: React.SyntheticEvent) {\n        let importText = (e.target as HTMLTextAreaElement).value;\n        this.setState({\n            importText: importText\n        });\n    }\n\n    handleImportSettings(e: React.SyntheticEvent) {\n        let text = (e.target as HTMLTextAreaElement).value;\n        if (text === \"\") {\n            return;\n        }\n        let res = this.props.onImportSettings(text);\n        if (res) {\n            this.setState({\n                importText: \"Successfully imported data!\"\n            }, () => {\n                setTimeout(() => {\n                    this.setState({\n                        showImport: false,\n                        showExport: false\n                    });\n                }, 5000);\n            });\n        } else {\n            this.setState({\n                importText: \"Invalid input\"\n            });\n        }\n    }\n\n    handleImportSettingsKeypress(e: React.KeyboardEvent) {\n        if (e.keyCode === 13) {\n            this.handleImportSettings(e);\n        }\n    }\n\n    handleClearData() {\n        if (window.confirm(\"Are you sure you want to delete all your session data?\\n(This cannot be undone)\")) {\n            this.props.onImportSettings(StorageFuncs.serialize(DefaultData));\n        }\n    }\n\n    handleAboutClick() {\n        alert(\"Math Practice was coded by MrSiliconGuy\\nwith the React.js framework\");\n    }\n\n    render() {\n        let settings = this.props.settings;\n        let showImport = this.state.showImport;\n        let showExport = this.state.showExport;\n        let dataSerialized = StorageFuncs.serialize(this.props.data);\n        return <div className=\"Settings\">\n            <fieldset className=\"Settings-fieldset\">\n                <legend>Math Session</legend>\n                <input\n                    type=\"checkbox\"\n                    checked={settings.showProgressBar}\n                    onChange={this.handleToggleShowProgressBar.bind(this)} />\n                <label onClick={this.handleToggleShowProgressBar.bind(this)}>Show Progress Bar</label>\n            </fieldset>\n            <fieldset className=\"Settings-fieldset\">\n                <legend>Import/Export</legend>\n                <span\n                    className=\"link\"\n                    onClick={() => this.handleImportExportToggle(true)}>Import</span>\n                <span\n                    className=\"link\"\n                    onClick={() => this.handleImportExportToggle(false)}>Export</span>\n                <span\n                    className=\"link\"\n                    onClick={this.handleClearData.bind(this)}>Clear Data</span><br />\n                {\n                    showExport ? (\n                        <textarea\n                            readOnly={true}\n                            cols={25}\n                            rows={4}\n                            className=\"Settings-import-export-box\"\n                            onClick={e => (e.target as HTMLTextAreaElement).select()}\n                            onBlur={this.handleExportBlur.bind(this)}\n                            value={dataSerialized}></textarea>\n                    ) : showImport ? (\n                        <textarea\n                            cols={25}\n                            rows={4}\n                            onClick={e => (e.target as HTMLTextAreaElement).select()}\n                            onChange={this.handleImportEdit.bind(this)}\n                            onKeyPress={this.handleImportSettingsKeypress.bind(this)}\n                            onBlur={this.handleImportSettings.bind(this)}\n                            className=\"Settings-import-export-box\"\n                            value={this.state.importText}\n                        ></textarea>\n                    ) : null\n                }\n            </fieldset>\n            <fieldset className=\"Settings-fieldset\">\n                <legend>Other</legend>\n                <span\n                    className=\"link\"\n                    onClick={this.handleAboutClick.bind(this)}>About</span>\n                <a\n                    className=\"link\"\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                    href=\"https://www.github.com/mrsiliconguy/math-practice\">GitHub</a>\n            </fieldset>\n        </div>\n    }\n}","import React from 'react';\nimport { SessionType, MathSessionResults, SessionTypes, SessionTypeNames, MathOperatorSymbols, DefaultRange, MathOperator, MathOperators } from '../model/Math';\nimport { StatFuncs } from '../model/Stats';\nimport { Util } from '../model/Util';\nimport cross from './cross.svg';\nimport './StatsView.css';\n\ntype StatsViewProps = {\n    history: MathSessionResults[],\n    onRemoveHistory: (index: number) => void\n}\n\ntype StatsViewState = {\n    view: SessionType\n}\n\nexport class StatsView extends React.Component<StatsViewProps, StatsViewState> {\n    constructor(props: StatsViewProps) {\n        super(props);\n        this.state = {\n            view: 'add'\n        };\n    }\n\n    handleChangeView(e: React.ChangeEvent) {\n        let view = (e.target as HTMLSelectElement).value as SessionType;\n        this.setState({\n            view\n        });\n    }\n\n    handleRemoveHistory(index: number) {\n        this.props.onRemoveHistory(index);\n    }\n\n    render() {\n        let view = this.state.view;\n        let history = this.props.history;\n        return (\n            <div className=\"StatsView\">\n                <select value={view} onChange={this.handleChangeView.bind(this)}>\n                    {\n                        SessionTypes.map(t =>\n                            <option key={t} value={t}>{SessionTypeNames[t]}</option>)\n                    }\n                </select>\n                <span>{SessionTypeNames[view]} Attempts: {StatFuncs.filterType(history, view).length}</span>\n                <span>Total Attempts: {history.length}</span>\n                <div className=\"StatsView-tables\">\n                    <RecentStats {...this.state} {...this.props} />\n                    <TotalStats {...this.state} {...this.props} onRemoveHistory={this.handleRemoveHistory.bind(this)} />\n                    {\n                        MathOperators.includes(view as MathOperator) ? (\n                            <IndividualStats {...this.state} {...this.props} />\n                        ) : null\n                    }\n                </div>\n            </div>\n        );\n    }\n}\n\ntype RecentStatsProps = {\n    view: SessionType,\n    history: MathSessionResults[],\n}\n\nexport function RecentStats(props: RecentStatsProps) {\n    let history = props.history;\n    let latest = StatFuncs.getLatestDefault(history, props.view);\n\n    let child = (latest === null || latest.individual === undefined) ? null : (\n        <tr>\n            <td>\n                <b>Fastest Times:</b>\n                <ul>\n                    {\n                        StatFuncs.getFastest(latest, 5).map((v, i) =>\n                            <li key={i}>\n                                {v.question.num1 + MathOperatorSymbols[v.question.oper] + v.question.num2 +\n                                    \" - \" + Util.formatSeconds(v.time)}\n                            </li>)\n                    }\n                </ul>\n            </td>\n            <td>\n                <b>Slowest Times:</b>\n                <ul>\n                    {\n                        StatFuncs.getSlowest(latest, 5).map((v, i) =>\n                            <li key={i}>\n                                {v.question.num1 + MathOperatorSymbols[v.question.oper] + v.question.num2 +\n                                    \" - \" + Util.formatSeconds(v.time)}\n                            </li>)\n                    }\n                </ul>\n            </td>\n        </tr>);\n    return (<table className=\"RecentStats\">\n        <caption>Latest Session:</caption>\n        <thead>\n            <tr>\n                <th>Date</th>\n                <th>Time</th>\n            </tr>\n        </thead>\n        <tbody>\n            <tr>\n                <td>{latest === null ? \"None\" :\n                    Util.formatDate(latest.date)}</td>\n                <td>{latest === null ? \"None\" :\n                    Util.formatSeconds(latest.totalTime)}</td>\n            </tr>\n            {child}\n        </tbody>\n    </table>);\n}\n\n\ntype TotalStatsProps = {\n    view: SessionType,\n    history: MathSessionResults[],\n    onRemoveHistory: (index: number) => void\n}\n\n\nexport function TotalStats(props: TotalStatsProps) {\n    let history = props.history;\n    let sorted = StatFuncs.getHistorySorted(history);\n    let filtered = StatFuncs.filterType(sorted, props.view);\n    let defaultHistory = filtered.filter(s => s.individual !== undefined);\n    let nonDefaultHistory = filtered.filter(s => s.individual === undefined);\n\n    function handleRemove(date: number) {\n        if (!window.confirm(\"Are you sure you want to remove this session?\")) {\n            return;\n        }\n        props.onRemoveHistory(history.findIndex(h => h.date === date));\n    }\n\n    return (<table className=\"TotalStats\">\n        <caption>All Sessions</caption>\n        <thead>\n            <tr>\n                <th>&nbsp;</th>\n                <th>Date</th>\n                <th>Time</th>\n                <th>Questions</th>\n                <th>&nbsp;</th>\n            </tr>\n        </thead>\n        <tbody>\n            {\n                defaultHistory.map((t, i) =>\n                    <tr key={i}>\n                        <td>{i + 1})</td>\n                        <td>{Util.formatDate(t.date)}</td>\n                        <td>{Util.formatSeconds(t.totalTime)}</td>\n                        <td>{t.individual !== undefined ? \"default\" : t.numQuestions}</td>\n                        <td>\n                            <button onClick={() => handleRemove(t.date)}>\n                                <img src={cross} alt=\"X\" />\n                            </button>\n                        </td>\n                    </tr>)\n            }\n            {\n                nonDefaultHistory.map((t, i) =>\n                    <tr key={i}>\n                        <td>{i + 1})</td>\n                        <td>{Util.formatDate(t.date)}</td>\n                        <td>{Util.formatSeconds(t.totalTime)}</td>\n                        <td>{t.individual !== undefined ? \"default\" : t.numQuestions}</td>\n                        <td>\n                            <button onClick={() => handleRemove(t.date)}>\n                                <img src={cross} alt=\"X\" />\n                            </button>\n                        </td>\n                    </tr>)\n            }\n        </tbody>\n    </table>);\n}\n\ntype IndividualStatsState = {\n    view: SessionType,\n    history: MathSessionResults[],\n}\n\nexport function IndividualStats(props: IndividualStatsState) {\n    let history = props.history;\n    let oper = props.view as MathOperator;\n    let range = Util.range(DefaultRange.min, DefaultRange.max);\n    let times = range.map(i => range.map(j => StatFuncs.getIndividualAverage(history, oper, i, j, 5)));\n    let timesSorted: number[] = times\n        .reduce((arr, times) => arr.concat(times), [])\n        .filter(t => t !== null)\n        .sort((a, b) => b! - a!) as number[];\n    let minTime = Math.min(...timesSorted);\n    let maxTime = Math.max(...timesSorted);\n    let getColor = (time: number | null) => {\n        if (time === null) {\n            return \"#777777\";\n        }\n        // Ratio based on relative scale\n        // let index = timesSorted.indexOf(time);\n        // let ratio = index / timesSorted.length;\n        // ----- Ratio based on relative scale 2 -----\n        // let ratio = (time - minTime) / (maxTime - minTime);\n        // ----- Ratio based on absolute scale -----\n        //     with 4 as max time\n        let ratio = Math.max(1, time / 4.0);\n        let hue = Math.round(ratio * 160);\n        return `hsl(${hue}, 100%, 50%)`;\n    }\n\n    let tableData = range.map(i => (\n        <tr>\n            <th className=\"IndividualStats-header\">{i}</th>\n            {\n                range.map(j => (() => {\n                    let curTime = times[i - DefaultRange.min][j - DefaultRange.min];\n                    return <td className=\"IndividualStats-data\" style={{ backgroundColor: getColor(curTime) }}>\n                        {curTime === null ? \"N/A\" : (curTime / 1000).toFixed(1)}\n                    </td>\n                })())\n            }\n        </tr>\n    ));\n\n    return (\n        <table className=\"IndividualStats\">\n            <caption>Individual Stats (Average of 5)</caption>\n            <thead>\n                <tr>\n                    <th>{MathOperatorSymbols[oper]}</th>\n                    {\n                        range.map(n => <th>{n}</th>)\n                    }\n                </tr>\n                {tableData}\n            </thead>\n        </table>\n    );\n}","import React from 'react';\nimport { AppContainer } from './components/AppContainer';\nimport { HomeView } from './components/HomeView';\nimport { SelectView } from './components/SelectView';\nimport './App.css';\nimport { MathSessionTemplate, MathSessionOptions, SessionType, MathFuncs, SessionTypeNames, MathSessionResults } from './model/Math';\nimport { Data, StorageFuncs, Settings } from './model/Storage';\nimport { Util } from './model/Util';\nimport { MathView } from './components/MathView';\nimport { SettingsView } from './components/SettingsView';\nimport { StatsView } from './components/StatsView';\n\ntype AppView = 'home' | 'select' | 'math' | 'stats' | 'settings';\n\ntype AppProps = {\n\n}\n\ntype AppState = {\n    view: AppView,\n    data: Data,\n    sessionOptions: MathSessionOptions | null\n}\n\nexport class App extends React.Component<AppProps, AppState> {\n    constructor(props: AppProps) {\n        super(props);\n        this.state = {\n            view: 'home',\n            data: StorageFuncs.load(),\n            sessionOptions: null\n        }\n    }\n\n    // Update Data\n    updateData(data: Data) {\n        this.setState({\n            data\n        });\n        StorageFuncs.save(data);\n    }\n\n    // General handlers\n    handleNavigate(view: AppView) {\n        this.setState({\n            view\n        })\n    }\n\n    handleStartDefaultSession(type: SessionType) {\n        let options = MathFuncs.generateDefaultSessionOptions(type);\n        this.handleStartSession(options);\n    }\n\n    // Select View\n    handleTemplateAdd(template: MathSessionTemplate) {\n        let data = Util.clone(this.state.data);\n        data.templates.push(template);\n\n        this.updateData(data);\n    }\n\n    handleTemplateRemove(index: number) {\n        let data = Util.clone(this.state.data);\n        data.templates.splice(index, 1);\n\n        this.updateData(data);\n    }\n\n    handleStartSession(options: MathSessionOptions) {\n        let view: 'math' = 'math';\n        this.setState({\n            view,\n            sessionOptions: options\n        });\n    }\n\n    // Math Session View\n    handleFinishSession(result: MathSessionResults) {\n        alert(\"Finished session in \" + Util.formatSeconds(result.totalTime));\n\n        let data = this.state.data;\n        data.history.push(result);\n        this.setState({\n            view: 'stats',\n            data\n        });\n        this.updateData(data);\n    }\n\n    // Stats View\n    handleRemoveHistory(index: number) {\n        let { data } = Util.clone(this.state);\n        data.history.splice(index, 1);\n        this.setState({\n            data\n        })\n    }\n\n    // Settings View\n    handleUpdateSettings(settings: Settings) {\n        let data = this.state.data;\n        data.settings = settings;\n        this.updateData(data);\n    }\n\n    handleImportData(text: string): boolean {\n        try {\n            let data = StorageFuncs.deserialize(text);\n            this.updateData(data);\n            return true;\n        } catch {\n            return false;\n        }\n    }\n\n    // ~~Blender~~ render\n    render() {\n        let data = this.state.data;\n        let sessionOptions = this.state.sessionOptions;\n        let settings = this.state.data.settings;\n\n        let child: React.ReactNode;\n        let title: string = \"\";\n        let showExit: boolean = false;\n        let onExit = () => this.handleNavigate('home');\n        let exitPrompt: string | null = null;\n\n        if (this.state.view === 'home') {\n            title = \"Math Practice\";\n            showExit = false;\n            child = <HomeView\n                history={data.history}\n                onStartPractice={this.handleStartDefaultSession.bind(this)}\n                onNavigateSelectSession={() => this.handleNavigate('select')}\n                onNavigateStats={() => this.handleNavigate('stats')}\n                onNavigateSettings={() => this.handleNavigate('settings')}\n            />;\n        } else if (this.state.view === 'select') {\n            title = \"Custom Practice\";\n            showExit = true;\n            child = <SelectView\n                sessionTemplates={data.templates}\n                onAddSessionTemplate={this.handleTemplateAdd.bind(this)}\n                onRemoveSessionTemplate={this.handleTemplateRemove.bind(this)}\n                onStartSession={this.handleStartSession.bind(this)}\n            />\n        } else if (this.state.view === 'math') {\n            title = SessionTypeNames[sessionOptions!.type];\n            showExit = true;\n            exitPrompt = \"Are you sure you want to quit practice now?\";\n            child = <MathView\n                settings={settings}\n                options={sessionOptions!}\n                onFinishSession={this.handleFinishSession.bind(this)}\n            />\n        } else if (this.state.view === 'stats') {\n            title = \"User Statistics\";\n            showExit = true;\n            child = <StatsView\n                onRemoveHistory={this.handleRemoveHistory.bind(this)}\n                history={data.history} />\n        } else if (this.state.view === 'settings') {\n            title = \"Settings\";\n            showExit = true;\n            child = <SettingsView\n                data={data}\n                settings={settings}\n                onUpdateSettings={this.handleUpdateSettings.bind(this)}\n                onImportSettings={this.handleImportData.bind(this)}\n            />\n        }\n\n        return (\n            <AppContainer\n                title={title}\n                exitPrompt={exitPrompt}\n                onExit={onExit}\n                showExit={showExit}>\n                {child}\n            </AppContainer>\n        );\n    }\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { App } from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.register();\n"],"sourceRoot":""}