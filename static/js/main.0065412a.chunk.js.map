{"version":3,"sources":["components/cross.svg","components/AppContainer.tsx","model/Util.ts","model/Math.ts","model/Stats.ts","components/HomeView.tsx","components/SelectView.tsx","model/Storage.ts","components/MathView.tsx","components/SettingsView.tsx","components/StatsView.tsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["module","exports","AppContainer","exit","this","props","exitPrompt","window","confirm","onExit","title","children","showExit","className","onClick","handleExit","bind","src","cross","alt","React","Component","rng","randomJS","Util","random","realZeroToOneExclusive","randInt","min","max","undefined","Math","floor","randChoice","arr","length","range","_","clone","obj","cloneDeep","shuffle","slice","i","j","extend","prop","plural","amount","text","formatSeconds","mills","round","formatDate","time","curTime","Date","getTime","days","months","date","diff","minutesAgo","hoursAgo","daysAgo","getDay","getMonth","getDate","MathOperators","SessionTypes","MathOperatorSymbols","SessionTypeNames","DefaultRange","MathFuncs","generateQuestion","num1","num2","oper","ans","Error","generateQuestionsRandom","type","pool1","pool2","numQuestions","questions","question","push","generateQuestionsOrdered","generateSession","options","isDefault","useRange","order","timeStarted","times","progress","total","generateDefaultSessionOptions","generateSessionResults","session","totalTime","reduce","a","t","individual","generateSessionIndividualResults","includes","index1","index2","startSession","StatFuncs","filterType","history","filter","v","getLatestDefault","getHistorySorted","sort","h1","h2","getFastest","result","fastest","b","splice","getSlowest","slowest","getIndividualAverage","filtered","count","sum","res","HomeView","state","sessionType","onStartPractice","view","onNavigateSelectSession","onNavigateStats","onNavigateSettings","e","target","value","setState","handleStartClick","onChange","handleSelectType","map","key","handleNavigate","RangeControlTypes","RangeControlTypeNames","SelectView","rangeType","numberQuestions","onStartSession","index","template","sessionTemplates","name","prompt","onAddSessionTemplate","onRemoveSessionTemplate","parseInt","Number","isNaN","NaN","isPool1","num","pool","indexOf","rangeControls","orderControls","templates","pattern","handleInputRangeAmount","onBlur","handleValidateRangeAmount","RangePool","onToggleNum","n","handleToggleRangePool","checked","handleSelectNumberQuestions","handleToggleShuffle","SessionTemplate","onStart","handleStartSessionTemplate","onRemove","handleRemoveTemplate","handleSelectRangeType","handleToggleRandom","handleStartSession","handleSaveTemplate","DefaultData","version","settings","showProgressBar","StorageFuncs","verifyData","Array","isArray","serialize","data","json","JSON","stringify","lzString","compressToBase64","deserialize","compress","decompressFromBase64","parse","load","localStorage","getItem","save","setItem","MathView","input","setTimeout","startTime","elapsedTime","results","onFinishSession","curQuestion","autoFocus","placeholder","maxLength","size","handleInput","style","width","SettingsView","showImport","showExport","importText","onUpdateSettings","isImport","onImportSettings","keyCode","handleImportSettings","alert","dataSerialized","handleToggleShowProgressBar","handleImportExportToggle","handleClearData","readOnly","cols","rows","select","handleExportBlur","handleImportEdit","onKeyPress","handleImportSettingsKeypress","handleAboutClick","rel","href","StatsView","latestHistory","onRemoveHistory","handleChangeView","RecentStats","TotalStats","handleRemoveHistory","IndividualStats","latest","child","sorted","defaultHistory","s","nonDefaultHistory","handleRemove","findIndex","h","timesSorted","concat","getColor","ratio","hue","tableData","backgroundColor","toFixed","App","sessionOptions","updateData","handleStartDefaultSession","handleTemplateAdd","handleTemplateRemove","handleFinishSession","handleUpdateSettings","handleImportData","isLocalhost","Boolean","location","hostname","match","registerValidSW","swUrl","config","navigator","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","controller","console","log","onUpdate","onSuccess","catch","error","ReactDOM","render","document","getElementById","URL","process","origin","addEventListener","fetch","headers","response","contentType","get","status","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.0065412a.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/cross.b5d66db1.svg\";","import React from 'react';\nimport './AppContainer.css';\nimport cross from './cross.svg';\n\ntype AppContainerProps = {\n    title: string,\n    children: React.ReactNode,\n    showExit: boolean,\n    exitPrompt: string | null,\n    onExit: () => void\n}\n\nexport class AppContainer extends React.Component<AppContainerProps> {\n    handleExit() {\n        let exit = true;\n        if (this.props.exitPrompt !== null) {\n            exit = window.confirm(this.props.exitPrompt);\n        }\n        if (exit) {\n            this.props.onExit();\n        }\n    }\n\n    render() {\n        let title = this.props.title;\n        let children = this.props.children;\n        let showExit = this.props.showExit;\n        return <div className=\"AppContainer\">\n            <div className=\"AppContainer-topbar\">\n                <span>{title}</span>\n                {showExit ? (<button onClick={this.handleExit.bind(this)}>\n                    {<img src={cross} alt=\"X\"/>}\n                </button>) : null}\n            </div>\n            <div className=\"AppContainer-container\">\n                {children}\n            </div>\n        </div>;\n    }\n}","import _ from 'lodash';\nimport * as randomJS from 'random-js';\n\nconst rng = new randomJS.Random();\n\nexport const Util = {\n    random(): number {\n        return rng.realZeroToOneExclusive();\n    },\n    randInt(min: number, max?: number): number {\n        if (max === undefined) {\n            max = min;\n            min = 0;\n        }\n        return Math.floor(Util.random() * (max - min)) + min;\n    },\n    randChoice<T>(arr: T[]): T {\n        return arr[Util.randInt(0, arr.length)];\n    },\n    range(min: number, max: number) {\n        return _.range(min, max + 1);\n    },\n    clone<T>(obj: T): T {\n        return _.cloneDeep(obj);\n    },\n    shuffle<T>(arr: T[]): T[] {\n        arr = arr.slice();\n        for (let i = 0; i < arr.length; i++) {\n            let j = Util.randInt(0, arr.length);\n            [arr[i], arr[j]] = [arr[j], arr[i]];\n        }\n        return arr;\n    },\n    extend<TSource, TObj>(obj: TSource, prop: TObj): TSource & TObj {\n        return _.extend(obj, prop)\n    },\n    plural(amount: number, text: string) {\n        return amount + \" \" + text + (amount === 1 ? \"\" : \"s\");\n    },\n    formatSeconds(mills: number): string {\n        return Math.round(mills / 100) / 10 + \"s\";\n    },\n    formatDate(time: number, curTime: number = new Date().getTime()): string {\n        const days = [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"];\n        const months = [\"January\", \"Februrary\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\",\n            \"October\", \"November\", \"December\"\n        ];\n\n        let date = new Date(time);\n        let diff = (curTime - time) / (1000 * 60); // Time difference in minutes\n        let minutesAgo = Math.round(diff);\n        let hoursAgo = Math.round(diff / 60);\n        let daysAgo = Math.round(diff / 60 / 24);\n\n        if (diff < 1 && diff > 0) {\n            return `Just now`;\n        } else if (diff < 60) {\n            return Util.plural(minutesAgo, \"minute\") + \" ago\";\n        } else if (diff < (60 * 24)) {\n            return Util.plural(hoursAgo, \"minute\") + \" ago\";\n        } else if (diff < (60 * 24 * 3)) {\n            return Util.plural(daysAgo, \"minute\") + \" ago\";\n        } else if (diff < (60 * 24 * 7)) {\n            return \"Last \" + days[date.getDay()] + \" (\" + Util.plural(daysAgo, \"day\") + \" ago)\";\n        } else {\n            return months[date.getMonth()] + \" \" + date.getDate() + \"(\" + Util.plural(daysAgo, \"days\") + \" ago)\";\n        }\n    }\n}","import { Util } from \"./Util\";\n\nexport type MathOperator = 'add' | 'sub' | 'mul' | 'div';\n\nexport const MathOperators: MathOperator[] = ['add', 'sub', 'mul', 'div'];\n\nexport type SessionType = MathOperator | 'mix' | 'sqr';\n\nexport const SessionTypes: SessionType[] = ['add', 'sub', 'mul', 'div', 'mix', 'sqr'];\n\nexport const MathOperatorSymbols = {\n    'add': '+',\n    'sub': '−',\n    'mul': '×',\n    'div': '÷'\n}\n\nexport const SessionTypeNames = {\n    'add': 'Addition',\n    'sub': 'Subtraction',\n    'mul': 'Multiplication',\n    'div': 'Division',\n    'mix': 'Mixed',\n    'sqr': 'Squares'\n}\n\nexport type MathQuestion = {\n    num1: number,\n    num2: number,\n    oper: MathOperator,\n    ans: number\n}\n\nexport type MathSession = {\n    timeStarted: number,\n    type: SessionType,\n    questions: MathQuestion[],\n    times: number[],\n    progress: number,\n    total: number,\n    isDefault: boolean,\n}\n\nexport type MathSessionOrder = 'all' | 'all-shuffle' | 'random';\n\nexport type MathSessionOptions = {\n    type: SessionType,\n    // Whether to use range or pool\n    useRange: boolean,\n    pool1?: number[],\n    pool2?: number[],\n    range?: { min: number, max: number },\n\n    // Run all questions, all but shuffled, or a random amount (uses numQuestions)\n    order: MathSessionOrder,\n    numQuestions?: number,\n\n    // Whether or not this is a default session\n    isDefault: boolean\n}\n\nexport type MathSessionTemplate = {\n    options: MathSessionOptions,\n    name: string\n}\n\nexport type MathSessionResults = {\n    date: number,\n    type: SessionType,\n    totalTime: number,\n    numQuestions: number,\n    individual?: MathSessionIndividualResults\n}\n\nexport type MathSessionIndividualResults = {\n    oper: MathOperator,\n    range: { min: number, max: number }\n    times: number[][]\n}\n\nexport const DefaultRange = {\n    min: 1,\n    max: 12\n}\n\nexport const MathFuncs = {\n    generateQuestion(num1: number, num2: number, oper: MathOperator): MathQuestion {\n        if (oper === 'add') {\n            return {\n                num1, num2, oper, ans: num1 + num2\n            }\n        } else if (oper === 'sub') {\n            return {\n                num1: num1 + num2, num2, oper, ans: num1\n            }\n        } else if (oper === 'mul') {\n            return {\n                num1, num2, oper, ans: num1 * num2\n            }\n        } else if (oper === 'div') {\n            return {\n                num1: num1 * num2, num2, oper, ans: num1\n            }\n        }\n        throw Error();\n    },\n    generateQuestionsRandom(type: SessionType, pool1: number[], pool2: number[], numQuestions: number): MathQuestion[] {\n        let num1: number;\n        let num2: number;\n        let oper: MathOperator;\n        let questions: MathQuestion[] = [];\n        for (let i = 0; i < numQuestions; i++) {\n            if (type === \"mix\") {\n                oper = Util.randChoice(MathOperators);\n                num1 = Util.randChoice(pool1);\n                num2 = Util.randChoice(pool2);\n            } else if (type === \"sqr\") {\n                oper = 'mul';\n                num1 = Util.randChoice(pool1);\n                num2 = num1;\n            } else {\n                oper = type;\n                num1 = Util.randChoice(pool1);\n                num2 = Util.randChoice(pool2);\n            }\n            let question = MathFuncs.generateQuestion(num1, num2, oper);\n            questions.push(question);\n        }\n        return questions;\n    },\n    generateQuestionsOrdered(type: SessionType, pool1: number[], pool2: number[]): MathQuestion[] {\n        let num1: number;\n        let num2: number;\n        let oper: MathOperator;\n        let questions: MathQuestion[] = [];\n        for (let i = 0; i < pool1.length; i++) {\n            for (let j = 0; j < pool2.length; j++) {\n                if (type === \"mix\") {\n                    oper = Util.randChoice(MathOperators);\n                    num1 = pool1[i];\n                    num2 = pool2[j];\n                } else if (type === \"sqr\") {\n                    oper = \"mul\";\n                    num1 = pool1[i];\n                    num2 = pool2[j];\n                    if (num1 !== num2) {\n                        continue;\n                    }\n                } else {\n                    oper = type;\n                    num1 = pool1[i];\n                    num2 = pool2[j];\n                }\n                let question = MathFuncs.generateQuestion(num1, num2, oper);\n                questions.push(question);\n            }\n        }\n        return questions;\n    },\n    generateSession(options: MathSessionOptions): MathSession {\n        let type = options.type;\n        let questions: MathQuestion[] = [];\n        let timeStarted = 0;\n        let times: number[] = [];\n        let progress = 0;\n        let total: number;\n        let isDefault = options.isDefault;\n\n        let pool1: number[];\n        let pool2: number[]\n        if (options.useRange) {\n            pool1 = Util.range(options.range!.min, options.range!.max)\n            pool2 = Util.range(options.range!.min, options.range!.max);\n        } else {\n            pool1 = Util.clone(options.pool1!);\n            pool2 = Util.clone(options.pool2 ?? options.pool1!);\n        }\n\n        // Generate Questions\n        if (options.order === \"random\") {\n            questions = MathFuncs.generateQuestionsRandom(type, pool1, pool2, options.numQuestions!);\n        } else if (options.order === \"all\") {\n            questions = MathFuncs.generateQuestionsOrdered(type, pool1, pool2);\n        } else if (options.order === \"all-shuffle\") {\n            questions = MathFuncs.generateQuestionsOrdered(type, pool1, pool2);\n            questions = Util.shuffle(questions);\n        }\n        total = questions.length;\n\n        return {\n            timeStarted,\n            type,\n            questions,\n            times,\n            progress,\n            total,\n            isDefault\n        }\n    },\n    generateDefaultSessionOptions(type: SessionType): MathSessionOptions {\n        let useRange = true;\n        let range = Util.clone(DefaultRange);\n        let order: \"all-shuffle\" = \"all-shuffle\";\n        return {\n            type,\n            useRange,\n            range,\n            order,\n            isDefault: true\n        };\n    },\n    generateSessionResults(session: MathSession): MathSessionResults {\n        let date = session.timeStarted;\n        let type = session.type;\n        let totalTime = session.times.reduce((a, t) => a + t, 0)\n        let individual = MathFuncs.generateSessionIndividualResults(session);\n        let numQuestions = session.total;\n        return {\n            date,\n            type,\n            totalTime,\n            numQuestions,\n            individual\n        };\n    },\n    generateSessionIndividualResults(session: MathSession): MathSessionIndividualResults | undefined {\n        // Only default math sessions where the session type is a math operator\n        // are allowed\n        if (!session.isDefault || !MathOperators.includes(session.type as MathOperator)) {\n            return;\n        }\n        let oper = session.type as MathOperator;\n        let range = Util.clone(DefaultRange);\n        let times: number[][] = [];\n        for (let i = range.min; i <= range.max; i++) {\n            let arr: number[] = []\n            for (let j = range.min; j <= range.max; j++) {\n                arr.push(0);\n            }\n            times.push(arr);\n        }\n        for (let i = 0; i < session.questions.length; i++) {\n            let question = session.questions[i];\n            let time = session.times[i];\n            let num1: number, num2: number;\n            if (['sub', 'div'].includes(question.oper)) {\n                num1 = question.ans;\n                num2 = question.num2;\n            } else {\n                num1 = question.num1;\n                num2 = question.num2;\n            }\n            let index1 = num1 - range.min;\n            let index2 = num2 - range.min;\n            times[index1][index2] = time;\n        }\n\n        return {\n            oper,\n            range,\n            times\n        };\n    },\n    startSession(session: MathSession): MathSession {\n        session.timeStarted = new Date().getTime();\n        return session;\n    }\n}","import { SessionType, MathSessionResults, MathQuestion, MathOperator, MathFuncs, DefaultRange } from \"./Math\";\n\ntype QuestionTime = {\n    question: MathQuestion\n    time: number\n}\n\nexport const StatFuncs = {\n    filterType(history: MathSessionResults[], type: SessionType): MathSessionResults[] {\n        return history.filter(v => v.type === type);\n    },\n    getLatestDefault(history: MathSessionResults[], type: SessionType): MathSessionResults | null {\n        for (let i = history.length - 1; i >= 0; i--) {\n            if (history[i].type === type) {\n                return history[i];\n            }\n        }\n        return null;\n    },\n    getHistorySorted(history: MathSessionResults[]): MathSessionResults[] {\n        return history.slice().sort((h1, h2) => h1.date - h2.date);\n    },\n    getFastest(result: MathSessionResults, amount: number): QuestionTime[] {\n        let individual = result.individual!;\n        let fastest: QuestionTime[] = [];\n        // Loop over each time\n        for (let i = 0; i < individual.times.length; i++) {\n            for (let j = 0; j < individual.times.length; j++) {\n                let time = individual.times[i][j];\n                // Add if it is faster than the slowest in the list\n                if (fastest.length < amount || fastest[fastest.length - 1].time > time) {\n                    fastest.push({\n                        question:\n                            MathFuncs.generateQuestion(i + individual.range.min,\n                                j + individual.range.min, result.type as MathOperator),\n                        time: time\n                    });\n                    fastest.sort((a, b) => a.time - b.time);\n                    fastest.splice(amount);\n                }\n            }\n        }\n        return fastest;\n    },\n    getSlowest(result: MathSessionResults, amount: number): QuestionTime[] {\n        let individual = result.individual!;\n        let slowest: QuestionTime[] = [];\n        for (let i = 0; i < individual.times.length; i++) {\n            for (let j = 0; j < individual.times.length; j++) {\n                let time = individual.times[i][j];\n                if (slowest.length < amount || slowest[slowest.length - 1].time < time) {\n                    slowest.push({\n                        question:\n                            MathFuncs.generateQuestion(i + individual.range.min,\n                                j + individual.range.min, result.type as MathOperator),\n                        time: time\n                    });\n                    slowest.sort((a, b) => b.time - a.time);\n                    slowest.splice(amount);\n                }\n            }\n        }\n        return slowest;\n    },\n    getIndividualAverage(history: MathSessionResults[], type: SessionType,\n        num1: number, num2: number, amount: number): number | null {\n\n        let filtered = StatFuncs.filterType(history, type);\n        let count = 0;\n        let sum = 0;\n        for (const res of filtered) {\n            if (res.individual !== undefined) {\n                count += 1;\n                sum += res.individual.times[num1 - DefaultRange.min][num2 - DefaultRange.min];\n            }\n        }\n\n        if (count === 0) {\n            return null;\n        } else {\n            return sum / count;\n        }\n    }\n}","import React from 'react';\nimport { SessionType, SessionTypes, SessionTypeNames, MathSessionResults } from '../model/Math';\nimport './HomeView.css';\nimport { StatFuncs } from '../model/Stats';\n\ntype HomeViewProps = {\n    history: MathSessionResults[],\n    onStartPractice: (type: SessionType) => void,\n    onNavigateSelectSession: () => void,\n    onNavigateStats: () => void,\n    onNavigateSettings: () => void\n}\n\ntype HomeViewState = {\n    sessionType: SessionType,\n}\n\nexport class HomeView extends React.Component<HomeViewProps, HomeViewState> {\n    constructor(props: HomeViewProps) {\n        super(props);\n        let history = StatFuncs.getHistorySorted(props.history);\n        let type: SessionType;\n        if (history.length === 0) {\n            type = \"add\"\n        } else {\n            type = history[history.length - 1].type;\n        }\n        this.state = {\n            sessionType: type\n        }\n    }\n\n    handleStartClick() {\n        this.props.onStartPractice(this.state.sessionType);\n    }\n\n    handleNavigate(view: 'select' | 'stats' | 'settings') {\n        if (view === 'select') {\n            this.props.onNavigateSelectSession();\n        } else if (view === 'stats') {\n            this.props.onNavigateStats();\n        } else {\n            this.props.onNavigateSettings();\n        }\n    }\n\n    handleSelectType(e: React.ChangeEvent) {\n        let sessionType = (e.target as HTMLSelectElement).value as SessionType;\n        this.setState({\n            sessionType\n        })\n    }\n\n    render() {\n        let sessionType = this.state.sessionType;\n        return (\n            <div className=\"Home\">\n                <button className=\"Home-start\" onClick={this.handleStartClick.bind(this)}>Start<br />Practice</button>\n                <select className=\"Home-start-type\" value={sessionType} onChange={this.handleSelectType.bind(this)}>\n                    {\n                        SessionTypes.map(t => <option value={t} key={t}>\n                            {SessionTypeNames[t]}\n                        </option>)\n                    }\n                </select>\n                <span className=\"link\" onClick={() => this.handleNavigate('select')}>\n                    Custom Session\n                </span>\n                <span className=\"link\" onClick={() => this.handleNavigate('stats')}>\n                    User Stats\n                </span>\n                <span className=\"link\" onClick={() => this.handleNavigate('settings')}>\n                    Settings\n                </span>\n            </div>\n        );\n    }\n}","import React from 'react';\nimport { MathSessionTemplate, MathSessionOptions, SessionType, SessionTypes, SessionTypeNames } from '../model/Math';\nimport { Util } from '../model/Util';\nimport './SelectView.css';\nimport cross from './cross.svg';\n\ntype RangeControlType = \"range\" | \"pool\";\n\nconst RangeControlTypes: RangeControlType[] = [\"range\", \"pool\"];\n\nconst RangeControlTypeNames = {\n    \"range\": \"Range\",\n    \"pool\": \"Pool\"\n}\n\ntype SelectViewProps = {\n    sessionTemplates: MathSessionTemplate[],\n    onStartSession: (options: MathSessionOptions) => void,\n    onAddSessionTemplate: (template: MathSessionTemplate) => void,\n    onRemoveSessionTemplate: (index: number) => void,\n}\n\ntype SelectViewState = {\n    rangeType: RangeControlType,\n    range: { min: number, max: number },\n    pool1: number[],\n    pool2: number[],\n    type: SessionType,\n    shuffle: boolean,\n    random: boolean,\n    numberQuestions: number\n}\n\nexport class SelectView extends React.Component<SelectViewProps, SelectViewState> {\n    constructor(props: SelectViewProps) {\n        super(props);\n        this.state = {\n            rangeType: \"range\",\n            range: { min: 1, max: 12 },\n            pool1: Util.range(1, 12),\n            pool2: Util.range(1, 12),\n            type: \"add\",\n            shuffle: true,\n            random: false,\n            numberQuestions: 20\n        }\n    }\n\n    handleStartSession() {\n        this.props.onStartSession({\n            type: this.state.type,\n            useRange: this.state.rangeType === \"range\",\n            range: this.state.range,\n            pool1: this.state.pool1,\n            pool2: this.state.pool2,\n            order: this.state.random ? \"random\" :\n                this.state.shuffle ? \"all-shuffle\" : \"all\",\n            numQuestions: this.state.numberQuestions,\n            isDefault: false\n        });\n    }\n\n    handleStartSessionTemplate(index: number) {\n        let template = this.props.sessionTemplates[index];\n        this.props.onStartSession(template.options);\n    }\n\n    handleSaveTemplate() {\n        let options: MathSessionOptions = {\n            type: this.state.type,\n            useRange: this.state.rangeType === \"range\",\n            range: this.state.range,\n            pool1: this.state.pool1,\n            pool2: this.state.pool2,\n            order: this.state.random ? \"random\" :\n                this.state.shuffle ? \"all-shuffle\" : \"all\",\n            numQuestions: this.state.numberQuestions,\n            isDefault: false\n        }\n        let name = window.prompt(\"Please enter a name for your session:\");\n        if (name === null) {\n            return;\n        }\n        this.props.onAddSessionTemplate({\n            options,\n            name\n        })\n    }\n\n    handleRemoveTemplate(index: number) {\n        this.props.onRemoveSessionTemplate(index);\n    }\n\n    handleSelectRangeType(e: React.ChangeEvent) {\n        let rangeType = (e.target as HTMLSelectElement).value as RangeControlType;\n        this.setState({ rangeType });\n    }\n\n    handleInputRangeAmount(e: React.ChangeEvent, min: boolean) {\n        let value = parseInt((e.target as HTMLInputElement).value, 10);\n        if (value < 0) {\n            value = 1;\n        }\n        let range = Util.clone(this.state.range);\n        if (min) {\n            range.min = value;\n        } else {\n            range.max = value;\n        }\n        this.setState({\n            range\n        });\n    }\n\n    handleValidateRangeAmount(e: React.ChangeEvent, min: boolean) {\n        let value = parseInt((e.target as HTMLInputElement).value, 10);\n        if (Number.isNaN(value)) {\n            value = NaN\n        }\n        value = Math.min(Math.max(value, 1), 1000);\n        let range = Util.clone(this.state.range);\n        if (min) {\n            range.min = value;\n            if (range.max < range.min) {\n                range.max = range.min;\n            }\n        } else {\n            range.max = value;\n            if (range.min > range.max) {\n                range.min = range.max\n            }\n        }\n        this.setState({\n            range\n        });\n    }\n\n    handleToggleRangePool(isPool1: boolean, num: number) {\n        let pool = isPool1 ? this.state.pool1 : this.state.pool2;\n        let index = pool.indexOf(num);\n        if (index === -1) {\n            pool.push(num);\n        } else {\n            pool.splice(index, 1);\n        }\n\n        if (isPool1) {\n            this.setState({\n                pool1: pool\n            });\n        } else {\n            this.setState({\n                pool2: pool\n            });\n        }\n    }\n\n    handleSelectType(e: React.ChangeEvent) {\n        let type = (e.target as HTMLSelectElement).value as SessionType;\n        this.setState({ type });\n    }\n\n    handleToggleShuffle() {\n        this.setState({\n            shuffle: !this.state.shuffle\n        });\n    }\n\n    handleToggleRandom() {\n        this.setState({\n            random: !this.state.random\n        });\n    }\n\n    handleSelectNumberQuestions(numberQuestions: number) {\n        this.setState({\n            numberQuestions\n        });\n    }\n\n    render() {\n        let templates = this.props.sessionTemplates;\n        let rangeType = this.state.rangeType;\n        let range = this.state.range;\n        let pool1 = this.state.pool1;\n        let pool2 = this.state.pool2;\n        let type = this.state.type;\n        let random = this.state.random;\n        let shuffle = this.state.shuffle;\n        let numberQuestions = this.state.numberQuestions;\n\n        let rangeControls: React.ReactNode;\n        if (rangeType === \"range\") {\n            rangeControls = <div className=\"Select-range-range\">\n                <input type=\"number\" pattern=\"[0-9]*\"\n                    min={1}\n                    value={Number.isNaN(range.min) ? \"\" : range.min}\n                    onChange={e => this.handleInputRangeAmount(e, true)}\n                    onBlur={e => this.handleValidateRangeAmount(e, true)} />\n                <input type=\"number\" pattern=\"[0-9]*\"\n                    min={1}\n                    value={Number.isNaN(range.max) ? \"\" : range.max}\n                    onChange={e => this.handleInputRangeAmount(e, false)}\n                    onBlur={e => this.handleValidateRangeAmount(e, false)} />\n            </div>\n        } else if (rangeType === \"pool\") {\n            rangeControls = [\n                <RangePool\n                    key={1}\n                    pool={pool1}\n                    onToggleNum={n => this.handleToggleRangePool(true, n)} />,\n                <RangePool\n                    key={2}\n                    pool={pool2}\n                    onToggleNum={n => this.handleToggleRangePool(false, n)} />,\n            ]\n        }\n\n        let orderControls: React.ReactNode;\n        if (random) {\n            orderControls = <div className=\"Select-order-random\">\n                {\n                    [20, 50, 100].map(n => [\n                        <input type=\"radio\" value={n}\n                            checked={n === numberQuestions}\n                            onChange={() => this.handleSelectNumberQuestions(n)} />,\n                        <label\n                            onClick={() => this.handleSelectNumberQuestions(n)}>{n} Questions</label>,\n                        <br />\n                    ])\n                }\n            </div>\n        } else {\n            orderControls = <div className=\"Select-order-shuffle\">\n                <input type=\"checkbox\" checked={shuffle}\n                    onChange={this.handleToggleShuffle.bind(this)} />\n                <label\n                    onClick={this.handleToggleShuffle.bind(this)}>Shuffle?</label>\n            </div>\n        }\n\n        return (\n            <div className=\"Select\">\n                <div className=\"Select-templates\">\n                    {\n                        templates.map((t, i) =>\n                            <SessionTemplate\n                                name={t.name}\n                                key={t.name}\n                                onStart={() => this.handleStartSessionTemplate(i)}\n                                onRemove={() => this.handleRemoveTemplate(i)}\n                            />\n                        )\n                    }\n                </div>\n                <div className=\"Select-options\">\n                    <div className=\"Select-rangetype\">\n                        <select value={rangeType} onChange={this.handleSelectRangeType.bind(this)}>\n                            {\n                                RangeControlTypes.map(t =>\n                                    <option key={t} value={t}>{RangeControlTypeNames[t]}</option>)\n                            }\n                        </select>\n                    </div>\n                    {rangeControls}\n                    <div className=\"Select-type\">\n                        <span>Type: </span>\n                        <select value={type} onChange={this.handleSelectType.bind(this)}>\n                            {\n                                SessionTypes.map(t =>\n                                    <option key={t} value={t}>{SessionTypeNames[t]}</option>)\n                            }\n                        </select>\n                    </div>\n                    <div className=\"Select-order\">\n                        <input type=\"checkbox\" checked={random}\n                            onChange={this.handleToggleRandom.bind(this)} />\n                        <label onClick={this.handleToggleRandom.bind(this)}>\n                            Random?\n                        </label>\n                    </div>\n                    {orderControls}\n                    <div className=\"Select-submit\">\n                        <button onClick={this.handleStartSession.bind(this)}>Start Practice</button>\n                        <span className=\"link\" onClick={this.handleSaveTemplate.bind(this)}>Save Settings</span>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\ntype SessionTemplateProps = {\n    name: string,\n    onStart: () => void,\n    onRemove: () => void\n}\n\nexport function SessionTemplate(props: SessionTemplateProps) {\n    function remove() {\n        if (!window.confirm(\"Are you sure you want to remove this template?\")) {\n            return;\n        }\n        props.onRemove();\n    }\n\n    return (<div className=\"SessionTemplate\">\n        <button className=\"SessionTemplate-start\" onClick={props.onStart}>Start</button>\n        <span className=\"SessionTemplate-name\">{props.name}</span>\n        <button className=\"SessionTemplate-remove\" onClick={remove}>\n            <img src={cross} alt=\"X\" />\n        </button>\n    </div>);\n}\n\ntype RangePoolProps = {\n    onToggleNum: (num: number) => void\n    pool: number[]\n}\n\nexport function RangePool(props: RangePoolProps) {\n    let { pool, onToggleNum } = props;\n    return (<div className=\"RangePool\">{\n        Util.range(1, 20).map(i =>\n            <button key={i}\n                className={\"RangePool-button \" +\n                    (pool.includes(i) ? \"RangePool-selected\" : \"\")}\n                onClick={() => onToggleNum(i)}>\n                {i}\n            </button>)\n    }</div>);\n}","import lzString from 'lz-string'\nimport ecoji from 'ecoji-js';\nimport { MathSessionTemplate, MathSessionResults } from \"./Math\";\nimport { Util } from \"./Util\";\n\nconst version = \"v2.0.0\";\n\nexport type Settings = {\n    showProgressBar: boolean\n}\n\nconst defaultSettings: Settings = {\n    showProgressBar: false\n}\n\nexport type Data = {\n    version: string,\n    history: MathSessionResults[],\n    templates: MathSessionTemplate[],\n    settings: Settings\n}\n\nexport const DefaultData: Data = {\n    version,\n    history: [],\n    templates: [],\n    settings: defaultSettings\n}\n\nexport const StorageFuncs = {\n    verifyData(obj: any): obj is Data {\n        return (typeof obj === \"object\") &&\n            (obj.version !== undefined) &&\n            (obj.version === version) &&\n            (obj.history !== undefined) &&\n            (Array.isArray(obj.history)) &&\n            (obj.templates !== undefined) &&\n            (Array.isArray(obj.templates)) &&\n            (obj.settings !== undefined) &&\n            (typeof obj.settings === \"object\");\n    },\n    serialize(data: Data): string {\n        let json = JSON.stringify(data);\n        let compress = lzString.compressToBase64(json);\n\n        return compress;\n    },\n    deserialize(text: string): Data {\n        let data: any\n        try {\n            let compress = lzString.decompressFromBase64(text);\n            let json = JSON.parse(compress);\n            data = json;\n        } catch {\n            throw Error(\"Could not parse data\");\n        }\n        if (this.verifyData(data)) {\n            return data;\n        } else {\n            throw Error(\"Invalid data\");\n        }\n    },\n    load(): Data {\n        let text = window.localStorage.getItem(version);\n        if (text === null) {\n            return Util.clone(DefaultData);\n        } else {\n            try {\n                return StorageFuncs.deserialize(text);\n            } catch {\n                return Util.clone(DefaultData);\n            }\n        }\n    },\n    async save(data: Data) {\n        let text = StorageFuncs.serialize(data);\n        window.localStorage.setItem(version, text);\n    }\n}","import React from 'react';\nimport { MathSession, MathFuncs, MathSessionOptions, MathOperatorSymbols, MathSessionResults } from '../model/Math';\nimport { Settings } from '../model/Storage';\nimport './MathView.css';\n\ntype MathViewProps = {\n    options: MathSessionOptions,\n    settings: Settings,\n    onFinishSession: (results: MathSessionResults) => void\n}\n\ntype MathViewState = {\n    input: number | null,\n    session: MathSession\n}\n\n\nexport class MathView extends React.Component<MathViewProps, MathViewState> {\n    constructor(props: MathViewProps) {\n        super(props);\n        let session = MathFuncs.generateSession(props.options);\n        MathFuncs.startSession(session);\n        this.state = {\n            session,\n            input: null\n        }\n    }\n\n    handleInput(e: React.FormEvent) {\n        // Skip if already finished somehow\n        if (this.state.session.progress === this.state.session.total) {\n            return;\n        }\n\n        let value = (e.target as HTMLInputElement).value as string;\n        let num = parseInt(value, 10);\n\n        let input = this.state.input;\n        input = Number.isNaN(num) ? null : num;\n\n        this.setState({ input }, () => setTimeout(() => {\n            let session = this.state.session;\n            // Skip if already finished somehow\n            if (this.state.session.progress === this.state.session.total) {\n                return;\n            }\n\n            if (input === session.questions[session.progress].ans) {\n                let input = null;\n                let startTime = session.timeStarted;\n                let totalTime = session.times.reduce((v, t) => v + t, 0);\n                let currentTime = new Date().getTime()\n                let elapsedTime = currentTime - startTime - totalTime;\n                // Cap at 9.9s per question\n                elapsedTime = Math.min(elapsedTime, 9900);\n                session.times.push(elapsedTime);\n                session.progress += 1;\n                if (session.progress === session.total) {\n                    let results = MathFuncs.generateSessionResults(session);\n                    this.props.onFinishSession(results)\n                } else {\n                    this.setState({\n                        session,\n                        input\n                    });\n                }\n            }\n        }, 100));\n    }\n\n    render() {\n        let settings = this.props.settings;\n        let input = this.state.input;\n        let session = this.state.session;\n        let curQuestion = session.questions[session.progress];\n\n        return (\n            <div className=\"Math\">\n                <div className=\"Math-session\">\n                    <div className=\"Math-question\">\n                        <span className=\"Math-oper\">{MathOperatorSymbols[curQuestion.oper]}</span>\n                        <div className=\"Math-numbers\">\n                            <span>{curQuestion.num1}</span>\n                            <span>{curQuestion.num2}</span>\n                        </div>\n                    </div>\n                    <div className=\"Math-answer\">\n                        <input\n                            autoFocus={true}\n                            placeholder=\"?\"\n                            maxLength={3}\n                            size={3}\n                            value={input ?? \"\"}\n                            onChange={this.handleInput.bind(this)}\n                            type=\"number\" />\n                    </div>\n                </div>\n                {\n                    settings.showProgressBar ?\n                        <div className=\"Math-progress\">\n                            <div style={{ width: (session.progress / session.total * 100) + \"%\" }}></div>\n                        </div> : null\n                }\n            </div>\n        );\n    }\n}","import React from 'react';\nimport { Settings, Data, StorageFuncs, DefaultData } from '../model/Storage';\nimport './SettingsView.css'\n\ntype SettingsViewProps = {\n    data: Data,\n    settings: Settings,\n    onUpdateSettings: (settings: Settings) => void,\n    onImportSettings: (text: string) => boolean,\n}\n\ntype SettingsViewState = {\n    showImport: boolean,\n    showExport: boolean,\n    importText: string\n}\n\nexport class SettingsView extends React.Component<SettingsViewProps, SettingsViewState> {\n    constructor(props: SettingsViewProps) {\n        super(props);\n        this.state = {\n            showImport: false,\n            showExport: false,\n            importText: \"\"\n        }\n    }\n\n    handleToggleShowProgressBar() {\n        let settings = this.props.settings;\n        settings.showProgressBar = !settings.showProgressBar;\n        this.props.onUpdateSettings(settings);\n    }\n\n    handleImportExportToggle(isImport: boolean) {\n        let showImport = this.state.showImport;\n        let showExport = this.state.showExport;\n        if (isImport) {\n            showImport = !showImport;\n            showExport = false;\n        } else {\n            showImport = false;\n            showExport = !showExport;\n        }\n        this.setState({\n            showImport,\n            showExport\n        })\n    }\n\n    handleExportBlur() {\n        this.setState({\n            showImport: false,\n            showExport: false\n        })\n    }\n\n    handleImportEdit(e: React.SyntheticEvent) {\n        let importText = (e.target as HTMLTextAreaElement).value;\n        this.setState({\n            importText: importText\n        });\n    }\n\n    handleImportSettings(e: React.SyntheticEvent) {\n        let text = (e.target as HTMLTextAreaElement).value;\n        if (text === \"\") {\n            return;\n        }\n        let res = this.props.onImportSettings(text);\n        if (res) {\n            this.setState({\n                importText: \"Successfully imported data!\"\n            }, () => {\n                setTimeout(() => {\n                    this.setState({\n                        showImport: false,\n                        showExport: false\n                    });\n                }, 5000);\n            });\n        } else {\n            this.setState({\n                importText: \"Invalid input\"\n            });\n        }\n    }\n\n    handleImportSettingsKeypress(e: React.KeyboardEvent) {\n        if (e.keyCode === 13) {\n            this.handleImportSettings(e);\n        }\n    }\n\n    handleClearData() {\n        if (window.confirm(\"Are you sure you want to delete all your session data?\\n(This cannot be undone)\")) {\n            this.props.onImportSettings(StorageFuncs.serialize(DefaultData));\n        }\n    }\n\n    handleAboutClick() {\n        alert(\"Math Practice was coded by MrSiliconGuy\\nwith the React.js framework\");\n    }\n\n    render() {\n        let settings = this.props.settings;\n        let showImport = this.state.showImport;\n        let showExport = this.state.showExport;\n        let dataSerialized = StorageFuncs.serialize(this.props.data);\n        return <div className=\"Settings\">\n            <fieldset className=\"Settings-fieldset\">\n                <legend>Math Session</legend>\n                <input\n                    type=\"checkbox\"\n                    checked={settings.showProgressBar}\n                    onChange={this.handleToggleShowProgressBar.bind(this)} />\n                <label onClick={this.handleToggleShowProgressBar.bind(this)}>Show Progress Bar</label>\n            </fieldset>\n            <fieldset className=\"Settings-fieldset\">\n                <legend>Import/Export</legend>\n                <span\n                    className=\"link\"\n                    onClick={() => this.handleImportExportToggle(true)}>Import</span>\n                <span\n                    className=\"link\"\n                    onClick={() => this.handleImportExportToggle(false)}>Export</span>\n                <span\n                    className=\"link\"\n                    onClick={this.handleClearData.bind(this)}>Clear Data</span><br />\n                {\n                    showExport ? (\n                        <textarea\n                            readOnly={true}\n                            cols={25}\n                            rows={4}\n                            className=\"Settings-import-export-box\"\n                            onClick={e => (e.target as HTMLTextAreaElement).select()}\n                            onBlur={this.handleExportBlur.bind(this)}\n                            value={dataSerialized}></textarea>\n                    ) : showImport ? (\n                        <textarea\n                            cols={25}\n                            rows={4}\n                            onClick={e => (e.target as HTMLTextAreaElement).select()}\n                            onChange={this.handleImportEdit.bind(this)}\n                            onKeyPress={this.handleImportSettingsKeypress.bind(this)}\n                            onBlur={this.handleImportSettings.bind(this)}\n                            className=\"Settings-import-export-box\"\n                            value={this.state.importText}\n                        ></textarea>\n                    ) : null\n                }\n            </fieldset>\n            <fieldset className=\"Settings-fieldset\">\n                <legend>Other</legend>\n                <span\n                    className=\"link\"\n                    onClick={this.handleAboutClick.bind(this)}>About</span>\n                <a\n                    className=\"link\"\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                    href=\"https://www.github.com/mrsiliconguy/math-practice\">GitHub</a>\n            </fieldset>\n        </div>\n    }\n}","import React from 'react';\nimport { SessionType, MathSessionResults, SessionTypes, SessionTypeNames, MathOperatorSymbols, DefaultRange, MathOperator, MathOperators } from '../model/Math';\nimport { StatFuncs } from '../model/Stats';\nimport { Util } from '../model/Util';\nimport cross from './cross.svg';\nimport './StatsView.css';\n\ntype StatsViewProps = {\n    history: MathSessionResults[],\n    onRemoveHistory: (index: number) => void\n}\n\ntype StatsViewState = {\n    view: SessionType\n}\n\nexport class StatsView extends React.Component<StatsViewProps, StatsViewState> {\n    constructor(props: StatsViewProps) {\n        super(props);\n        let latestHistory = StatFuncs.getHistorySorted(props.history)[props.history.length - 1];\n        this.state = {\n            view: latestHistory === undefined ? 'add' : latestHistory.type\n        };\n    }\n\n    handleChangeView(e: React.ChangeEvent) {\n        let view = (e.target as HTMLSelectElement).value as SessionType;\n        this.setState({\n            view\n        });\n    }\n\n    handleRemoveHistory(index: number) {\n        this.props.onRemoveHistory(index);\n    }\n\n    render() {\n        let view = this.state.view;\n        let history = this.props.history;\n        return (\n            <div className=\"StatsView\">\n                <select value={view} onChange={this.handleChangeView.bind(this)}>\n                    {\n                        SessionTypes.map(t =>\n                            <option key={t} value={t}>{SessionTypeNames[t]}</option>)\n                    }\n                </select>\n                <span>{SessionTypeNames[view]} Attempts: {StatFuncs.filterType(history, view).length}</span>\n                <span>Total Attempts: {history.length}</span>\n                <div className=\"StatsView-tables\">\n                    <RecentStats {...this.state} {...this.props} />\n                    <TotalStats {...this.state} {...this.props} onRemoveHistory={this.handleRemoveHistory.bind(this)} />\n                    {\n                        MathOperators.includes(view as MathOperator) ? (\n                            <IndividualStats {...this.state} {...this.props} />\n                        ) : null\n                    }\n                </div>\n            </div>\n        );\n    }\n}\n\ntype RecentStatsProps = {\n    view: SessionType,\n    history: MathSessionResults[],\n}\n\nexport function RecentStats(props: RecentStatsProps) {\n    let history = props.history;\n    let latest = StatFuncs.getLatestDefault(history, props.view);\n\n    let child = (latest === null || latest.individual === undefined) ? null : (\n        <tr>\n            <td>\n                <b>Fastest Times:</b>\n                <ul>\n                    {\n                        StatFuncs.getFastest(latest, 5).map((v, i) =>\n                            <li key={i}>\n                                {v.question.num1 + MathOperatorSymbols[v.question.oper] + v.question.num2 +\n                                    \" - \" + Util.formatSeconds(v.time)}\n                            </li>)\n                    }\n                </ul>\n            </td>\n            <td>\n                <b>Slowest Times:</b>\n                <ul>\n                    {\n                        StatFuncs.getSlowest(latest, 5).map((v, i) =>\n                            <li key={i}>\n                                {v.question.num1 + MathOperatorSymbols[v.question.oper] + v.question.num2 +\n                                    \" - \" + Util.formatSeconds(v.time)}\n                            </li>)\n                    }\n                </ul>\n            </td>\n        </tr>);\n    return (<table className=\"RecentStats\">\n        <caption>Latest Session:</caption>\n        <thead>\n            <tr>\n                <th>Date</th>\n                <th>Time</th>\n            </tr>\n        </thead>\n        <tbody>\n            <tr>\n                <td>{latest === null ? \"None\" :\n                    Util.formatDate(latest.date)}</td>\n                <td>{latest === null ? \"None\" :\n                    Util.formatSeconds(latest.totalTime)}</td>\n            </tr>\n            {child}\n        </tbody>\n    </table>);\n}\n\n\ntype TotalStatsProps = {\n    view: SessionType,\n    history: MathSessionResults[],\n    onRemoveHistory: (index: number) => void\n}\n\n\nexport function TotalStats(props: TotalStatsProps) {\n    let history = props.history;\n    let sorted = StatFuncs.getHistorySorted(history);\n    let filtered = StatFuncs.filterType(sorted, props.view);\n    let defaultHistory = filtered.filter(s => s.individual !== undefined);\n    let nonDefaultHistory = filtered.filter(s => s.individual === undefined);\n\n    function handleRemove(date: number) {\n        if (!window.confirm(\"Are you sure you want to remove this session?\")) {\n            return;\n        }\n        props.onRemoveHistory(history.findIndex(h => h.date === date));\n    }\n\n    return (<table className=\"TotalStats\">\n        <caption>All Sessions</caption>\n        <thead>\n            <tr>\n                <th>&nbsp;</th>\n                <th>Date</th>\n                <th>Time</th>\n                <th>Questions</th>\n                <th>&nbsp;</th>\n            </tr>\n        </thead>\n        <tbody>\n            {\n                defaultHistory.map((t, i) =>\n                    <tr key={i}>\n                        <td>{i + 1})</td>\n                        <td>{Util.formatDate(t.date)}</td>\n                        <td>{Util.formatSeconds(t.totalTime)}</td>\n                        <td>{t.individual !== undefined ? \"default\" : t.numQuestions}</td>\n                        <td>\n                            <button onClick={() => handleRemove(t.date)}>\n                                <img src={cross} alt=\"X\" />\n                            </button>\n                        </td>\n                    </tr>)\n            }\n            {\n                nonDefaultHistory.map((t, i) =>\n                    <tr key={i}>\n                        <td>{i + 1})</td>\n                        <td>{Util.formatDate(t.date)}</td>\n                        <td>{Util.formatSeconds(t.totalTime)}</td>\n                        <td>{t.individual !== undefined ? \"default\" : t.numQuestions}</td>\n                        <td>\n                            <button onClick={() => handleRemove(t.date)}>\n                                <img src={cross} alt=\"X\" />\n                            </button>\n                        </td>\n                    </tr>)\n            }\n        </tbody>\n    </table>);\n}\n\ntype IndividualStatsState = {\n    view: SessionType,\n    history: MathSessionResults[],\n}\n\nexport function IndividualStats(props: IndividualStatsState) {\n    let history = props.history;\n    let oper = props.view as MathOperator;\n    let range = Util.range(DefaultRange.min, DefaultRange.max);\n    let times = range.map(i => range.map(j => StatFuncs.getIndividualAverage(history, oper, i, j, 5)));\n    let timesSorted: number[] = times\n        .reduce((arr, times) => arr.concat(times), [])\n        .filter(t => t !== null)\n        .sort((a, b) => b! - a!) as number[];\n    let minTime = Math.min(...timesSorted);\n    let maxTime = Math.max(...timesSorted);\n    let getColor = (time: number | null) => {\n        if (time === null) {\n            return \"#777777\";\n        }\n        // Ratio based on relative scale\n        // let index = timesSorted.indexOf(time);\n        // let ratio = index / timesSorted.length;\n        // ----- Ratio based on relative scale 2 -----\n        // let ratio = (time - minTime) / (maxTime - minTime);\n        // ----- Ratio based on absolute scale -----\n        //     with 5s as max time\n        let ratio = 1 - Math.min(1, time / 4000);\n        let hue = Math.round(ratio * 160);\n        return `hsl(${hue}, 100%, 50%)`;\n    }\n\n    let tableData = range.map(i => (\n        <tr>\n            <th className=\"IndividualStats-header\">{i}</th>\n            {\n                range.map(j => (() => {\n                    let curTime = times[i - DefaultRange.min][j - DefaultRange.min];\n                    return <td className=\"IndividualStats-data\" style={{ backgroundColor: getColor(curTime) }}>\n                        {curTime === null ? \"N/A\" : (curTime / 1000).toFixed(1)}\n                    </td>\n                })())\n            }\n        </tr>\n    ));\n\n    return (\n        <table className=\"IndividualStats\">\n            <caption>Individual Stats (Average of 5)</caption>\n            <thead>\n                <tr>\n                    <th>{MathOperatorSymbols[oper]}</th>\n                    {\n                        range.map(n => <th>{n}</th>)\n                    }\n                </tr>\n                {tableData}\n            </thead>\n        </table>\n    );\n}","import React from 'react';\nimport { AppContainer } from './components/AppContainer';\nimport { HomeView } from './components/HomeView';\nimport { SelectView } from './components/SelectView';\nimport './App.css';\nimport { MathSessionTemplate, MathSessionOptions, SessionType, MathFuncs, SessionTypeNames, MathSessionResults } from './model/Math';\nimport { Data, StorageFuncs, Settings } from './model/Storage';\nimport { Util } from './model/Util';\nimport { MathView } from './components/MathView';\nimport { SettingsView } from './components/SettingsView';\nimport { StatsView } from './components/StatsView';\n\ntype AppView = 'home' | 'select' | 'math' | 'stats' | 'settings';\n\ntype AppProps = {\n\n}\n\ntype AppState = {\n    view: AppView,\n    data: Data,\n    sessionOptions: MathSessionOptions | null\n}\n\nexport class App extends React.Component<AppProps, AppState> {\n    constructor(props: AppProps) {\n        super(props);\n        this.state = {\n            view: 'home',\n            data: StorageFuncs.load(),\n            sessionOptions: null\n        }\n    }\n\n    // Update Data\n    updateData(data: Data) {\n        this.setState({\n            data\n        });\n        StorageFuncs.save(data);\n    }\n\n    // General handlers\n    handleNavigate(view: AppView) {\n        this.setState({\n            view\n        })\n    }\n\n    handleStartDefaultSession(type: SessionType) {\n        let options = MathFuncs.generateDefaultSessionOptions(type);\n        this.handleStartSession(options);\n    }\n\n    // Select View\n    handleTemplateAdd(template: MathSessionTemplate) {\n        let data = Util.clone(this.state.data);\n        data.templates.push(template);\n\n        this.updateData(data);\n    }\n\n    handleTemplateRemove(index: number) {\n        let data = Util.clone(this.state.data);\n        data.templates.splice(index, 1);\n\n        this.updateData(data);\n    }\n\n    handleStartSession(options: MathSessionOptions) {\n        let view: 'math' = 'math';\n        this.setState({\n            view,\n            sessionOptions: options\n        });\n    }\n\n    // Math Session View\n    handleFinishSession(result: MathSessionResults) {\n        alert(\"Finished session in \" + Util.formatSeconds(result.totalTime));\n\n        let data = this.state.data;\n        data.history.push(result);\n        this.setState({\n            view: 'stats',\n            data\n        });\n        this.updateData(data);\n    }\n\n    // Stats View\n    handleRemoveHistory(index: number) {\n        let { data } = Util.clone(this.state);\n        data.history.splice(index, 1);\n        this.updateData(data)\n    }\n\n    // Settings View\n    handleUpdateSettings(settings: Settings) {\n        let data = this.state.data;\n        data.settings = settings;\n        this.updateData(data);\n    }\n\n    handleImportData(text: string): boolean {\n        try {\n            let data = StorageFuncs.deserialize(text);\n            this.updateData(data);\n            return true;\n        } catch {\n            return false;\n        }\n    }\n\n    // ~~Blender~~ render\n    render() {\n        let data = this.state.data;\n        let sessionOptions = this.state.sessionOptions;\n        let settings = this.state.data.settings;\n\n        let child: React.ReactNode;\n        let title: string = \"\";\n        let showExit: boolean = false;\n        let onExit = () => this.handleNavigate('home');\n        let exitPrompt: string | null = null;\n\n        if (this.state.view === 'home') {\n            title = \"Math Practice\";\n            showExit = false;\n            child = <HomeView\n                history={data.history}\n                onStartPractice={this.handleStartDefaultSession.bind(this)}\n                onNavigateSelectSession={() => this.handleNavigate('select')}\n                onNavigateStats={() => this.handleNavigate('stats')}\n                onNavigateSettings={() => this.handleNavigate('settings')}\n            />;\n        } else if (this.state.view === 'select') {\n            title = \"Custom Practice\";\n            showExit = true;\n            child = <SelectView\n                sessionTemplates={data.templates}\n                onAddSessionTemplate={this.handleTemplateAdd.bind(this)}\n                onRemoveSessionTemplate={this.handleTemplateRemove.bind(this)}\n                onStartSession={this.handleStartSession.bind(this)}\n            />\n        } else if (this.state.view === 'math') {\n            title = SessionTypeNames[sessionOptions!.type];\n            showExit = true;\n            exitPrompt = \"Are you sure you want to quit practice now?\";\n            child = <MathView\n                settings={settings}\n                options={sessionOptions!}\n                onFinishSession={this.handleFinishSession.bind(this)}\n            />\n        } else if (this.state.view === 'stats') {\n            title = \"User Statistics\";\n            showExit = true;\n            child = <StatsView\n                onRemoveHistory={this.handleRemoveHistory.bind(this)}\n                history={data.history} />\n        } else if (this.state.view === 'settings') {\n            title = \"Settings\";\n            showExit = true;\n            child = <SettingsView\n                data={data}\n                settings={settings}\n                onUpdateSettings={this.handleUpdateSettings.bind(this)}\n                onImportSettings={this.handleImportData.bind(this)}\n            />\n        }\n\n        return (\n            <AppContainer\n                title={title}\n                exitPrompt={exitPrompt}\n                onExit={onExit}\n                showExit={showExit}>\n                {child}\n            </AppContainer>\n        );\n    }\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { App } from './App';\nimport * as serviceWorker from './serviceWorker';\n\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.register();\n"],"sourceRoot":""}